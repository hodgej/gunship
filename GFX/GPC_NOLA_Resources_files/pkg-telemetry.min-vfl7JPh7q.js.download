define("metaserver/static/js/logging/compression",["require","exports"],(function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.getBestCompressionCodec=t.IdentityCodec=void 0;class n{inflate(e){return e}deflate(e){return e}}t.IdentityCodec=n,t.getBestCompressionCodec=function(){return new n}})),define("metaserver/static/js/logging/hive/schemas/web-user-action",["require","exports"],(function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.WebUserActionRow=void 0;t.WebUserActionRow=class{constructor(e){this.category="web-user-action",this.session_id=null,this.user_id=null,this.team_id=null,this.on_maestro=!0,this.extra={},this.ua_browser_name=null,this.ua_browser_version=null,this.ua_dist_name=null,this.ua_dist_version=null,this.ua_os_name=null,this.ua_os_version=null,this.authed_user_ids=null,this.identity_gid=null,this.anon_ip=null,this.active_user_id=null,this.team_type=null,this.locale_browser_header=null,this.locale_user_selected=null,this.referrer=null,this.user_agent=null,this.country=null,e.hasOwnProperty("event_name")&&void 0!==e.event_name&&(this.event_name=e.event_name),e.hasOwnProperty("session_id")&&void 0!==e.session_id&&(this.session_id=e.session_id),e.hasOwnProperty("source")&&void 0!==e.source&&(this.source=e.source),e.hasOwnProperty("user_id")&&void 0!==e.user_id&&(this.user_id=e.user_id),e.hasOwnProperty("team_id")&&void 0!==e.team_id&&(this.team_id=e.team_id),e.hasOwnProperty("on_maestro")&&void 0!==e.on_maestro&&(this.on_maestro=e.on_maestro),e.hasOwnProperty("extra")&&void 0!==e.extra&&(this.extra=e.extra),e.hasOwnProperty("ua_browser_name")&&void 0!==e.ua_browser_name&&(this.ua_browser_name=e.ua_browser_name),e.hasOwnProperty("ua_browser_version")&&void 0!==e.ua_browser_version&&(this.ua_browser_version=e.ua_browser_version),e.hasOwnProperty("ua_dist_name")&&void 0!==e.ua_dist_name&&(this.ua_dist_name=e.ua_dist_name),e.hasOwnProperty("ua_dist_version")&&void 0!==e.ua_dist_version&&(this.ua_dist_version=e.ua_dist_version),e.hasOwnProperty("ua_os_name")&&void 0!==e.ua_os_name&&(this.ua_os_name=e.ua_os_name),e.hasOwnProperty("ua_os_version")&&void 0!==e.ua_os_version&&(this.ua_os_version=e.ua_os_version),e.hasOwnProperty("authed_user_ids")&&void 0!==e.authed_user_ids&&(this.authed_user_ids=e.authed_user_ids),e.hasOwnProperty("identity_gid")&&void 0!==e.identity_gid&&(this.identity_gid=e.identity_gid),e.hasOwnProperty("timestamp")&&void 0!==e.timestamp&&(this.timestamp=e.timestamp),e.hasOwnProperty("anon_ip")&&void 0!==e.anon_ip&&(this.anon_ip=e.anon_ip),e.hasOwnProperty("active_user_id")&&void 0!==e.active_user_id&&(this.active_user_id=e.active_user_id),e.hasOwnProperty("team_type")&&void 0!==e.team_type&&(this.team_type=e.team_type),e.hasOwnProperty("locale_browser_header")&&void 0!==e.locale_browser_header&&(this.locale_browser_header=e.locale_browser_header),e.hasOwnProperty("locale_user_selected")&&void 0!==e.locale_user_selected&&(this.locale_user_selected=e.locale_user_selected),e.hasOwnProperty("referrer")&&void 0!==e.referrer&&(this.referrer=e.referrer),e.hasOwnProperty("user_agent")&&void 0!==e.user_agent&&(this.user_agent=e.user_agent),e.hasOwnProperty("country")&&void 0!==e.country&&(this.country=e.country),e.hasOwnProperty("view_type")&&void 0!==e.view_type&&(this.view_type=e.view_type),e.hasOwnProperty("file_nsid")&&void 0!==e.file_nsid&&(this.file_nsid=e.file_nsid),e.hasOwnProperty("file_sjid")&&void 0!==e.file_sjid&&(this.file_sjid=e.file_sjid),e.hasOwnProperty("file_id")&&void 0!==e.file_id&&(this.file_id=e.file_id),e.hasOwnProperty("file_name")&&void 0!==e.file_name&&(this.file_name=e.file_name),e.hasOwnProperty("file_path")&&void 0!==e.file_path&&(this.file_path=e.file_path),e.hasOwnProperty("file_size")&&void 0!==e.file_size&&(this.file_size=e.file_size),e.hasOwnProperty("file_extension")&&void 0!==e.file_extension&&(this.file_extension=e.file_extension),e.hasOwnProperty("request_id")&&void 0!==e.request_id&&(this.request_id=e.request_id),e.hasOwnProperty("upload_id")&&void 0!==e.upload_id&&(this.upload_id=e.upload_id),e.hasOwnProperty("all_fsw_ids")&&void 0!==e.all_fsw_ids&&(this.all_fsw_ids=e.all_fsw_ids),e.hasOwnProperty("filtered_fsw_ids")&&void 0!==e.filtered_fsw_ids&&(this.filtered_fsw_ids=e.filtered_fsw_ids),e.hasOwnProperty("browser_width")&&void 0!==e.browser_width&&(this.browser_width=e.browser_width),e.hasOwnProperty("browser_height")&&void 0!==e.browser_height&&(this.browser_height=e.browser_height),e.hasOwnProperty("device_width")&&void 0!==e.device_width&&(this.device_width=e.device_width),e.hasOwnProperty("device_height")&&void 0!==e.device_height&&(this.device_height=e.device_height),e.hasOwnProperty("action_source")&&void 0!==e.action_source&&(this.action_source=e.action_source),Object.seal(this)}}})),define("metaserver/static/js/logging/sender",["require","exports","tslib","metaserver/static/js/deprecated_ajax/ajax","metaserver/static/js/core/xhr"],(function(e,t,n,i,s){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.Sender=t.MAX_REPORT_ATTEMPTS=void 0,s=n.__importStar(s);t.MAX_REPORT_ATTEMPTS=4;const r=204;t.Sender=class{constructor(e,t,n){this.store=e,this.sendInterval=t,this.batchSize=n,this.numSuccessfulPublish=0,this.numFailedPublish=0,this._pageUnloading=!1,this.scheduleNextSend(Date.now())}drainAllLogs(){this._pageUnloading||(this._pageUnloading=!0,this.store.subscribeToPushEvent(()=>{this.sendOnce(!0)})),null!=this.nextSendTimeoutId&&clearTimeout(this.nextSendTimeoutId),this.sendOnce(!0)}sendOnce(e=!1){const t=this.store.drain(this.batchSize);Object.keys(t).length>0&&this.publish(t,e);const n=Date.now();this.scheduleNextSend(n),this.lastSendTime=n}publish(e,t=!1){const n={},o={};if(Object.keys(e).forEach((function(t){const i=e[t].map(e=>e.records());n[t]=JSON.stringify([].concat.apply([],i))})),o["data-version"]="1",o.batches=JSON.stringify(n),o.stats=this.store.stats.getAndReset(),t&&"navigator"in window&&"sendBeacon"in window.navigator)return void(0,i.SilentBackgroundBeaconRequest)({url:"/log/telemetry",data:o});s.sendXhr("/log/telemetry",o,t=>{t===r?this.onSendSuccess(e):this.onSendFailure(e)})}scheduleNextSend(e){this.nextSendTime=e+this.sendInterval,this.nextSendTimeoutId=setTimeout(()=>{this.sendOnce()},this.sendInterval)}onSendSuccess(e){this.numSuccessfulPublish++,window.SECRET_LOGGING_FRAMEWORK_CALLBACK_DO_NOT_USE&&window.SECRET_LOGGING_FRAMEWORK_CALLBACK_DO_NOT_USE(e)}onSendFailure(e){this.numFailedPublish++;for(const n in e)if(e.hasOwnProperty(n))for(const i of e[n])i.markFailure(),i.numReportAttempts<t.MAX_REPORT_ATTEMPTS&&this.store.reEnqueueBatch(n,i)}}})),define("metaserver/static/js/logging/storage",["require","exports"],(function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.MessageBatch=t.WindowStorage=t.EventStorage=t.MAX_MESSAGES_IN_BATCH=void 0,t.MAX_MESSAGES_IN_BATCH=100;class n{constructor(){this.stats=new i}}t.EventStorage=n;class i{constructor(){this.rate_stats={}}_val(e,t){return e.hasOwnProperty(t)?e[t]:0}onPushEvent(e){for(const t of["*",e]){const e="enqueue:"+t;this.rate_stats[e]=this._val(this.rate_stats,e)+1}}onDrain(e){let t=0;for(const n in e)if(e.hasOwnProperty(n)){const i=e[n].map(e=>e.size()).reduce((e,t)=>e+t,0),s="dequeue:"+n;this.rate_stats[s]=this._val(this.rate_stats,s)+i,t+=i}this.rate_stats["dequeue:*"]=this._val(this.rate_stats,"dequeue:*")+t}onReEnqueueBatch(e,t){for(const n of["*",e]){const e="reEnqueue:"+n;this.rate_stats[e]=this._val(this.rate_stats,e)+t.size()}}getAndReset(){const e=JSON.stringify({"rate-stats":this.rate_stats});return this.rate_stats={},e}}t.WindowStorage=class extends n{constructor(e){super(),this.compressionCodec=e,this.existing_batches={},this._pushEventCallbacks=[]}_append_batch_to_category(e,t){this.existing_batches[e]||(this.existing_batches[e]=[]),this.existing_batches[e].push(t)}_get_or_create_batch(e){let t=this.existing_batches[e];return t&&0!==t.length||(this._add_new_batch_for_category(e),t=this.existing_batches[e]),t[t.length-1]}_add_new_batch_for_category(e){const n=new s(e,t.MAX_MESSAGES_IN_BATCH,this.compressionCodec);return this._append_batch_to_category(e,n),n}pushEvent(e,t){const n=JSON.parse(JSON.stringify(t));if(this.stats.onPushEvent(e),!this._get_or_create_batch(e).tryAppend(n)){this._add_new_batch_for_category(e).tryAppend(n)}for(const e of this._pushEventCallbacks)"function"==typeof e&&e()}reEnqueueBatch(e,t){return this.stats.onReEnqueueBatch(e,t),this._append_batch_to_category(e,t)}subscribeToPushEvent(e){this._pushEventCallbacks.push(e)}drain(e){let t=e;const n={};for(const e in this.existing_batches)if(this.existing_batches.hasOwnProperty(e)){if(t<=0)break;const i=this.existing_batches[e].splice(0,t);if(t-=i.length,i.length>0){for(const e of i)e.close();n[e]=i}}return this.stats.onDrain(n),n}};class s{constructor(e,t,n){this.category=e,this.maxMessages=t,this.compressionCodec=n,this.numReportAttempts=0,this.messages=[]}isFull(){return this.messages.length>=this.maxMessages}size(){return this.messages.length}tryAppend(e){return!this.isFull()&&!this.closed&&(this.messages.push(e),this.isFull()&&this.close(),!0)}close(){this.closed||(this.closed=!0)}records(){return this.messages}markFailure(){if(!this.closed)throw new Error("Attempted to send an open batch");this.numReportAttempts++}}t.MessageBatch=s})),define("metaserver/static/js/logging/telemetry",["require","exports","metaserver/static/js/logging/storage","metaserver/static/js/logging/compression","metaserver/static/js/logging/sender","metaserver/static/js/core/browser"],(function(e,t,n,i,s,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.getGlobalTelemetrySingleton=t.ClientTelemetry=t.VortexComboLogger=t.HiveLogger=t.JSEventLogger=void 0;class o{constructor(e){this.prefix=e}log(e){u().storage.pushEvent(this.prefix+e.category,e)}}t.JSEventLogger=class extends o{constructor(){super("js:")}};t.HiveLogger=class extends o{constructor(){super("hive:")}};t.VortexComboLogger=class extends o{constructor(){super("vortexcombo:")}};class a{constructor(){const e=(0,i.getBestCompressionCodec)();this.storage=new n.WindowStorage(e),this.sender=new s.Sender(this.storage,5e3,1),(0,r.onBrowserRedirect)(e=>{this.drainAllLogs()}),window.addEventListener("beforeunload",()=>{this.drainAllLogs()})}drainAllLogs(){this.sender.drainAllLogs()}sendOnce(){this.sender.sendOnce()}}let c;function u(){return c||(c=new a),c}t.ClientTelemetry=a,t.getGlobalTelemetrySingleton=u})),define("metaserver/static/prod_assets_web_modules/web-vitals",["exports"],(function(e){"use strict";var t,n,i,s,r,o=-1,a=function(e){addEventListener("pageshow",(function(t){t.persisted&&(o=t.timeStamp,e(t))}),!0)},c=function(){return window.performance&&performance.getEntriesByType&&performance.getEntriesByType("navigation")[0]},u=function(){var e=c();return e&&e.activationStart||0},d=function(e,t){var n=c(),i="navigate";return o>=0?i="back-forward-cache":n&&(i=document.prerendering||u()>0?"prerender":n.type.replace(/_/g,"-")),{name:e,value:void 0===t?-1:t,rating:"good",delta:0,entries:[],id:"v3-".concat(Date.now(),"-").concat(Math.floor(8999999999999*Math.random())+1e12),navigationType:i}},h=function(e,t,n){try{if(PerformanceObserver.supportedEntryTypes.includes(e)){var i=new PerformanceObserver((function(e){t(e.getEntries())}));return i.observe(Object.assign({type:e,buffered:!0},n||{})),i}}catch(e){}},l=function(e,t){var n=function n(i){"pagehide"!==i.type&&"hidden"!==document.visibilityState||(e(i),t&&(removeEventListener("visibilitychange",n,!0),removeEventListener("pagehide",n,!0)))};addEventListener("visibilitychange",n,!0),addEventListener("pagehide",n,!0)},_=function(e,t,n,i){var s,r;return function(o){t.value>=0&&(o||i)&&((r=t.value-(s||0))||void 0===s)&&(s=t.value,t.delta=r,t.rating=(function(e,t){return e>t[1]?"poor":e>t[0]?"needs-improvement":"good"})(t.value,n),e(t))}},f=-1,p=function(){return"hidden"!==document.visibilityState||document.prerendering?1/0:0},v=function(){l((function(e){var t=e.timeStamp;f=t}),!0)},m=function(){return f<0&&(f=p(),v(),a((function(){setTimeout((function(){f=p(),v()}),0)}))),{get firstHiddenTime(){return f}}},g=function(e,t){t=t||{};var n,i=[1800,3e3],s=m(),r=d("FCP"),o=function(e){e.forEach((function(e){"first-contentful-paint"===e.name&&(l&&l.disconnect(),e.startTime<s.firstHiddenTime&&(r.value=e.startTime-u(),r.entries.push(e),n(!0)))}))},c=window.performance&&window.performance.getEntriesByName&&window.performance.getEntriesByName("first-contentful-paint")[0],l=c?null:h("paint",o);(c||l)&&(n=_(e,r,i,t.reportAllChanges),c&&o([c]),a((function(s){r=d("FCP"),n=_(e,r,i,t.reportAllChanges),requestAnimationFrame((function(){requestAnimationFrame((function(){r.value=performance.now()-s.timeStamp,n(!0)}))}))})))},w=!1,y=-1,b=function(e,t){t=t||{};var n=[.1,.25];w||(g((function(e){y=e.value})),w=!0);var i,s=function(t){y>-1&&e(t)},r=d("CLS",0),o=0,c=[],u=function(e){e.forEach((function(e){if(!e.hadRecentInput){var t=c[0],n=c[c.length-1];o&&e.startTime-n.startTime<1e3&&e.startTime-t.startTime<5e3?(o+=e.value,c.push(e)):(o=e.value,c=[e]),o>r.value&&(r.value=o,r.entries=c,i())}}))},f=h("layout-shift",u);f&&(i=_(s,r,n,t.reportAllChanges),l((function(){u(f.takeRecords()),i(!0)})),a((function(){o=0,y=-1,r=d("CLS",0),i=_(s,r,n,t.reportAllChanges)})))},O={passive:!0,capture:!0},P=new Date,S=function(e,s){t||(t=s,n=e,i=new Date,A(removeEventListener),E())},E=function(){if(n>=0&&n<i-P){var e={entryType:"first-input",name:t.type,target:t.target,cancelable:t.cancelable,startTime:t.timeStamp,processingStart:t.timeStamp+n};s.forEach((function(t){t(e)})),s=[]}},T=function(e){if(e.cancelable){var t=(e.timeStamp>1e12?new Date:performance.now())-e.timeStamp;"pointerdown"==e.type?(function(e,t){var n=function(){S(e,t),s()},i=function(){s()},s=function(){removeEventListener("pointerup",n,O),removeEventListener("pointercancel",i,O)};addEventListener("pointerup",n,O),addEventListener("pointercancel",i,O)})(t,e):S(t,e)}},A=function(e){["mousedown","keydown","touchstart","pointerdown"].forEach((function(t){return e(t,T,O)}))},C=function(e,i){i=i||{};var r,o=[100,300],c=m(),u=d("FID"),f=function(e){e.startTime<c.firstHiddenTime&&(u.value=e.processingStart-e.startTime,u.entries.push(e),r(!0))},p=function(e){e.forEach(f)},v=h("first-input",p);r=_(e,u,o,i.reportAllChanges),v&&l((function(){p(v.takeRecords()),v.disconnect()}),!0),v&&a((function(){var a;u=d("FID"),r=_(e,u,o,i.reportAllChanges),s=[],n=-1,t=null,A(addEventListener),a=f,s.push(a),E()}))},x=0,L=1/0,M=0,j=function(e){e.forEach((function(e){e.interactionId&&(L=Math.min(L,e.interactionId),M=Math.max(M,e.interactionId),x=M?(M-L)/7+1:0)}))},I=function(){return r?x:performance.interactionCount||0},R=function(){"interactionCount"in performance||r||(r=h("event",j,{type:"event",buffered:!0,durationThreshold:0}))},F=0,B=function(){return I()-F},q=[],N={},k=function(e){var t=q[q.length-1],n=N[e.interactionId];if(n||q.length<10||e.duration>t.latency){if(n)n.entries.push(e),n.latency=Math.max(n.latency,e.duration);else{var i={id:e.interactionId,latency:e.duration,entries:[e]};N[i.id]=i,q.push(i)}q.sort((function(e,t){return t.latency-e.latency})),q.splice(10).forEach((function(e){delete N[e.id]}))}},D=function(e,t){t=t||{};var n=[200,500];R();var i,s=d("INP"),r=function(e){e.forEach((function(e){e.interactionId&&k(e),"first-input"===e.entryType&&!q.some((function(t){return t.entries.some((function(t){return e.duration===t.duration&&e.startTime===t.startTime}))}))&&k(e)}));var t,n=(t=Math.min(q.length-1,Math.floor(B()/50)),q[t]);n&&n.latency!==s.value&&(s.value=n.latency,s.entries=n.entries,i())},o=h("event",r,{durationThreshold:t.durationThreshold||40});i=_(e,s,n,t.reportAllChanges),o&&(o.observe({type:"first-input",buffered:!0}),l((function(){r(o.takeRecords()),s.value<0&&B()>0&&(s.value=0,s.entries=[]),i(!0)})),a((function(){q=[],F=I(),s=d("INP"),i=_(e,s,n,t.reportAllChanges)})))},G={},z=function(e,t){t=t||{};var n,i=[2500,4e3],s=m(),r=d("LCP"),o=function(e){var t=e[e.length-1];if(t){var i=t.startTime-u();i<s.firstHiddenTime&&(r.value=i,r.entries=[t],n())}},c=h("largest-contentful-paint",o);if(c){n=_(e,r,i,t.reportAllChanges);var f=function(){G[r.id]||(o(c.takeRecords()),c.disconnect(),G[r.id]=!0,n(!0))};["keydown","click"].forEach((function(e){addEventListener(e,f,{once:!0,capture:!0})})),l(f,!0),a((function(s){r=d("LCP"),n=_(e,r,i,t.reportAllChanges),requestAnimationFrame((function(){requestAnimationFrame((function(){r.value=performance.now()-s.timeStamp,G[r.id]=!0,n(!0)}))}))}))}},H=function(e,t){t=t||{};var n=[800,1800],i=d("TTFB"),s=_(e,i,n,t.reportAllChanges);(function e(t){document.prerendering?addEventListener("prerenderingchange",(function(){return e(t)}),!0):"complete"!==document.readyState?addEventListener("load",(function(){return e(t)}),!0):setTimeout(t,0)})((function(){var r=c();if(r){if(i.value=Math.max(r.responseStart-u(),0),i.value<0||i.value>performance.now())return;i.entries=[r],s(!0),a((function(){i=d("TTFB",0),(s=_(e,i,n,t.reportAllChanges))(!0)}))}}))};e.getCLS=b,e.getFCP=g,e.getFID=C,e.getINP=D,e.getLCP=z,e.getTTFB=H,e.onCLS=b,e.onFCP=g,e.onFID=C,e.onINP=D,e.onLCP=z,e.onTTFB=H,Object.defineProperty(e,"__esModule",{value:!0})}));
//# sourceMappingURL=pkg-telemetry.min.js-vflBbd9bZ.map