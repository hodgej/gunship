define("metaserver/static/js/flux/base_store",["require","exports","metaserver/static/js/flux/dispatcher","metaserver/static/js/core/assert"],(function(t,e,s,o){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.Store=void 0;const i=(function(){let t=!1;const e=[];return s.Dispatcher.dispatch_begin=()=>t=!0,s.Dispatcher.dispatch_end=function(){t=!1;try{return Array.from(e).map(t=>t())}finally{e.length=0}},function(s){return t?Array.from(e).includes(s)?void 0:e.push(s):s()}})();class n{constructor(t){"function"==typeof this._init&&this._init(),this._change_listeners=[],this._dispatcher=t||s.Dispatcher,this.dispatchToken=this._dispatcher.register(this._new_payload_wrapper.bind(this))}destructor(){this._dispatcher.unregister(this.dispatchToken),this.remove_all_change_listeners()}emit_change(){for(const t of this._change_listeners)i(t)}add_change_listener(t){(0,o.assert)(!this._change_listeners.includes(t),"adding duplicate change listener not allowed"),this._change_listeners.push(t)}remove_change_listener(t){this._change_listeners=this._change_listeners.filter(e=>e!==t)}remove_all_change_listeners(){this._change_listeners.length=0}_new_payload_wrapper(t){var e;(null===(e=null==t?void 0:t.action)||void 0===e?void 0:e.type)===this.constructor.WIPE_TYPE&&"function"==typeof this._init&&this._init(),this._new_payload(t)}_new_payload(t){throw new Error("Abstract method - must be implemented")}}e.Store=n,n.WIPE_TYPE="WIPE_ALL"})),define("metaserver/static/js/clean/downloads",["require","exports","tslib","metaserver/static/js/api_v2/user_client","metaserver/static/js/filepath/filepath","metaserver/static/js/metrics/index","metaserver/static/js/clean/ui/snackbar","metaserver/static/js/core/browser_detection","metaserver/static/js/core/assert","metaserver/static/js/core/html","metaserver/static/js/core/i18n","metaserver/static/js/core/notify","metaserver/static/js/core/uri"],(function(t,e,s,o,i,n,r,a,l,d,c,u,p){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.get_zip=e.getZipDownloadUrl=e.showGetZipUrlErrorSnackbar=e.zip_batch_by_ns_id=e.get_blockserver_link=e.get=void 0,i=s.__importStar(i),a=s.__importStar(a);const h=["dl-web.dropbox.com","dl.dropboxusercontent.com"],_=c.intl.formatMessage({id:"L64bdq",defaultMessage:"There was an error downloading your file."});let m=!1,f={};function b({source:t,type:e}){(0,n.getMetricsReporter)().createStats({ns:"web_file_actions",name:"download/failed"},{source:t,type:e}).record(1)}e.get=({url:t,error:e,source:s="unknown"})=>{const o=p.URI.parse(t),i=o.getAuthority();(function({source:t}){(0,n.getMetricsReporter)().createStats({ns:"web_file_actions",name:"download/attempt"},{source:t}).record(1)})({source:s});const r=h.includes(i)||i.endsWith(".dropboxusercontent.com")||"www.dropbox.com"===i;r||b({source:s,type:"download_non_block_server"}),(0,l.assert)(r,"attempt to download from a non-blockserver domain",{exc_extra:{domain:i,url:t}}),m||(m=!0,f={},window.addEventListener("message",y));const d=(function(){let t="";for(let e=1;e<=4;e++)t+=String(Math.random()).split(".")[1];return t})();o.updateQuery({_download_id:d,_notify_domain:window.location.host});return g({downloadUri:o,downloadId:d,error:e,downloadDomain:i,onLoad:()=>{setTimeout(()=>{const t=f[d];null!=t&&(a.chrome&&(u.Notify.error(_),t.error&&(t.error(),b({source:t.source,type:"download_failed"}))),v(d))},100)},source:s}),!1};const g=({downloadUri:t,downloadId:e,error:s,downloadDomain:o,onLoad:i,source:n})=>{const r=document.createElement("iframe");r.setAttribute("src",String(t)),r.style.display="none",i&&r.addEventListener("load",i),f[e]={origin:o,error:s,iframe:r,source:n},document.body.appendChild(r),window.setTimeout(()=>v(e),9e4)};e.get_blockserver_link=function({url:t,ns_id:s,ns_path:o,inside_admin_console:i,legal_hold_export_gid:n,revision_id:r,error:a}){const d=p.URI.parse(t);return d.setScheme("https"),i?(d.updateQuery({dl:"1",inside_admin_console:"true"}),n&&d.updateQuery({legal_hold_export_gid:n})):d.updateQuery({dl:"1"}),null!=s&&((0,l.assert)("string"==typeof o,`Namespace ID was passed with invalid path, got: ${o}`),d.updateQuery({nsid:String(s),path:o})),null!=r&&d.updateQuery({revision_id:r}),(0,l.assert)("dl-web.dropbox.com"===d.getAuthority(),`download_blockserver_url expects a blockserver resource, got: ${t}`),(0,e.get)({url:d.toString(),error:a,source:"get_blockserver_link"})},e.zip_batch_by_ns_id=function({parent_ns_id:t,parent_ns_path:e,files:s,subject_uid:o,block_hash:n}){const r=new p.URI({scheme:"https",authority:"dl-web.dropbox.com",path:"/zip_batch_by_ns_id",query:{_subject_uid:String(o),parent_ns_id:String(t),parent_ns_path:e||"/"}}).toString(),a=document.createElement("form");a.setAttribute("action",r),a.setAttribute("method","post");for(const t of s){const s=`${e}/${i.filename(t.fq_path)}`,o=document.createElement("input");o.setAttribute("name","ns_paths"),o.setAttribute("value",s),a.appendChild(o)}const l=document.createElement("input");l.setAttribute("name","w"),l.setAttribute("value",n),a.appendChild(l),document.body.appendChild(a),a.submit(),a.remove()};e.showGetZipUrlErrorSnackbar=t=>{let e;e="too_many_files"===t[".tag"]?c.intl.formatMessage({id:"ZvH26K",defaultMessage:"Attempted to zip too many files."}):"too_much_data"===t[".tag"]?c.intl.formatMessage({id:"Qq4R12",defaultMessage:"Attempted to zip too much data."}):"file_not_found"===t[".tag"]?c.intl.formatMessage({id:"XSR4O8",defaultMessage:"File not found."}):"unauthorized_user"===t[".tag"]?c.intl.formatMessage({id:"tUjhJf",defaultMessage:"Unauthorized user."}):"unauthorized_namespace"===t[".tag"]?c.intl.formatMessage({id:"62VIQy",defaultMessage:"You can't download because you can't access all content.  Please try again, selecting only folders where you have access to all the content."}):c.intl.formatMessage({id:"ItwtZa",defaultMessage:"Zip download failed."}),r.Snackbar.fail(e,"zip-download-status")};function y(t){const e=p.URI.parse(t.origin);if("https"!==e.getScheme())return;if(!h.includes(e.getAuthority())&&!e.getAuthority().endsWith(".dropboxusercontent.com"))return;let s;try{s=JSON.parse(t.data)}catch(t){return}if(!s||!s.download_id)return;const o=f[s.download_id];if(null!=o&&e.getAuthority()===o.origin&&t.source===o.iframe.contentWindow){if("failed"===s.status){const t=(s.message||_)+'<a target="_blank" rel="noreferrer" href="/help/desktop-web/download-entire-folders">'+c.intl.formatMessage({id:"WYQtmB",defaultMessage:"More info"})+"</a>";u.Notify.error(new d.HTML(t)),o.error&&(o.error(),b({source:o.source,type:"download_failed"}))}v(s.download_id)}}function v(t){const e=f[t];null!=e&&(e.iframe.remove(),delete f[t])}e.getZipDownloadUrl=({block_hash:t,fq_paths:e,parent_path:i,flat_mode:n,subjectUserId:r,root_ns_id:a})=>s.__awaiter(void 0,void 0,void 0,(function*(){try{const s=new o.UserApiV2Client;return{result:yield s.ns("browse_zip_downloads").rpc("get_zip_download_url",{block_hash:t,unnormalized_files:[...e],parent_path:i,flat_mode:n,root_ns_id:a},{subjectUserId:r}),isError:!1}}catch(t){return".tag"in t.error?{isError:!0,error:t.error}:{isError:!0,error:{".tag":"undefined_error"}}}})),e.get_zip=function({fq_paths:t,subject_uid:o,block_hash:i,parent_path:n,flat_zip_mode:r,source:a="unknown",root_ns_id:l}){return s.__awaiter(this,void 0,void 0,(function*(){""===n&&(n="/");const s=yield(0,e.getZipDownloadUrl)({block_hash:i,fq_paths:[...t],parent_path:n,flat_mode:!!r,subjectUserId:o,root_ns_id:l});if(s.isError)(0,e.showGetZipUrlErrorSnackbar)(s.error),b({source:a,type:"zip_download_error"});else{const{url:t}=s.result;(0,e.get)({url:t,source:a})}}))}})),define("metaserver/static/js/deprecated_ajax/ajax_as_promised_jquery",["require","exports","tslib","metaserver/static/js/deprecated_ajax/ajax_jquery","metaserver/static/js/deprecated_ajax/ajax_jquery"],(function(t,e,s,o,i){"use strict";function n(t){return e=>new Promise((s,o)=>{const n=t(Object.assign(Object.assign({},e),{success:(t,o,i)=>{e.success&&e.success(t,o,i),s(t)},error:(t,i,n)=>{e.error&&e.error(t,i,n),200===t.status?(e.success&&e.success(t.responseText,"success",t),s(t.responseText)):o({jqXHR:t,textStatus:i,errorThrown:n})}}));if(e.signal){const t=()=>{const t=(0,i.getFakeJQXHR)();t.readyState=XMLHttpRequest.DONE,t.responseText="Aborted",t.status=500,t.statusText="abort",n.abort(),o({jqXHR:t,textStatus:"aborted",errorThrown:"Aborted"})};e.signal.aborted?t():e.signal.addEventListener("abort",t)}})}Object.defineProperty(e,"__esModule",{value:!0}),e.WebProgressRequest=e.FormWebRequest=e.WebRequestOref=e.WebRequest=e.SilentBackgroundRequest=e.Request=e.BackgroundRequest=void 0,o=s.__importStar(o),e.BackgroundRequest=n(o.BackgroundRequest),e.Request=n(o.Request),e.SilentBackgroundRequest=n(o.SilentBackgroundRequest),e.WebRequest=n(o.WebRequest),e.WebRequestOref=n(o.WebRequestOref),e.FormWebRequest=n(o.FormWebRequest),e.WebProgressRequest=n(o.WebProgressRequest)})),define("metaserver/static/js/bolt/bolt_nodeps",["require","exports","tslib","lodash","metaserver/static/js/core/exception"],(function(t,e,s,o,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.ThunderClient=e.BoltClient=e.ChannelPayloads=e.Payload=e.SignedChannelState=e.ChannelId=void 0,o=s.__importStar(o),i=s.__importStar(i);class n{constructor(t,e){this.app_id=t,this.unique_id=e}static from_json(t){return new n(t.app_id,t.unique_id)}}e.ChannelId=n;class r{constructor(t,e,s,o){this.app_id=t,this.unique_id=e,this.revision=s,this.token=o}to_json(){var t;return{channel_id:{app_id:this.app_id,unique_id:this.unique_id},revision:null!==(t=this.revision)&&void 0!==t?t:"",token:this.token}}static from_json(t){return new r(t.channel_id.app_id,t.channel_id.unique_id,t.revision,t.token)}}e.SignedChannelState=r;class a{constructor(t,e){this.revision=t,this.payload=e}}e.Payload=a;class l{constructor(t,e){this.channel_state=t,this.payloads=e}}e.ChannelPayloads=l;const d=t=>JSON.stringify(t);class c{constructor(t,e,s,r){this._find_state=t=>this._signed_channel_states[d(t)],this._long_poll=()=>{this._sequence_num++;const t=this._sequence_num,e=new XMLHttpRequest;e.open("POST",this._subscribe_url(),!0),e.setRequestHeader("Content-Type","application/json; charset=utf-8"),Object.keys(this._additional_headers).forEach(t=>{e.setRequestHeader(t,this._additional_headers[t])}),e.timeout=12e4,e.withCredentials=!0,e.responseType="json";const s=()=>this._handle_poll_error(t);e.addEventListener("load",()=>{const{status:s}=e;s>=200&&s<300||304===s?this._handle_poll_success(t,e):this._handle_poll_error(t)}),e.addEventListener("timeout",s),e.addEventListener("error",s),e.addEventListener("abort",s),e.send(JSON.stringify({channel_states:this._signed_channel_states_keys.map(t=>this._signed_channel_states[t])})),this._long_poll_xhr=e},this._must_find_state=t=>{const e=this._find_state(t);if(null==e){const e=`Bolt returned unknown channel id ${t}`;i.reportStack(e)}return e},this._handle_poll_data=(t,e)=>{throw i.reportStack("Method must be implemented."),new Error("Method must be implemented.")},this._handle_poll_success=(t,e)=>{if(t!==this._sequence_num)return;if(this._long_poll_xhr=void 0,!this._started)return;const s=e.response,i=this._handle_poll_data(s,e);if(i.length>0&&o.defer(()=>this._update_callback(i)),null!=s.invalid_channels&&s.invalid_channels.length>0){const t=s.invalid_channels.map(n.from_json);o.defer(()=>this._refresh_callback(t))}else this._backoff_window=1e3,this._timeout_id=window.setTimeout(this._long_poll,0)},this._handle_poll_error=t=>{if(t!==this._sequence_num)return;if(this._long_poll_xhr=void 0,!this._started)return;const e=Math.random()*this._backoff_window;this._backoff_window=Math.min(2*this._backoff_window,3e5),this._timeout_id=window.setTimeout(this._long_poll,e)},this._update_callback=e,this._refresh_callback=s,this._hostname=r,this._signed_channel_states={},this._signed_channel_states_keys=[],this._started=!1,this._sequence_num=0,this._backoff_window=1e3,this._additional_headers={},this.update_states(t)}_compare_revisions(t,e){const s=Math.max(t.length,e.length),o=Array(s-t.length+1).join("0")+t,i=Array(s-e.length+1).join("0")+e;return o<i?-1:o>i?1:0}update_states(t){for(const e of t){const t=e.to_json(),s=this._find_state(t.channel_id);if(null==s){const e=d(t.channel_id);this._signed_channel_states[e]=t,this._signed_channel_states_keys.push(e)}else this._compare_revisions(t.revision,s.revision)>=0&&(s.revision=t.revision,s.token=t.token)}}start(){this._started||(this._started=!0,this._long_poll())}unsubscribe(){this._started=!1,null!=this._long_poll_xhr&&this._long_poll_xhr.abort(),this._long_poll_xhr=void 0,window.clearTimeout(this._timeout_id),this._timeout_id=void 0}_subscribe_url(){return`https://${this._hostname}${this._subscribe_endpoint()}`}_subscribe_endpoint(){throw i.reportStack("Method must be implemented."),new Error("Method must be implemented.")}}e.BoltClient=class extends c{constructor(t,e,s){super(t,e,s,"bolt.dropbox.com"),this._handle_poll_data=(t,e)=>{const s=[];if(null!=t.channel_states)for(const e of t.channel_states){const t=this._must_find_state(e.channel_id);this._compare_revisions(e.revision,t.revision)>0&&(t.revision=e.revision,t.token=e.token,s.push(r.from_json(e)))}return s}}_subscribe_endpoint(){return"/2/notify/subscribe"}};e.ThunderClient=class extends c{constructor(t,e,s){super(t,e,s,"thunder.dropbox.com"),this._handle_poll_data=(t,e)=>{const s=[];this._additional_headers={};const o=e.getResponseHeader("X-Bolt-Session");if(o&&(this._additional_headers["X-Bolt-Session"]=o),null!=t.channel_payloads)for(const e of t.channel_payloads){const t=e.channel_state,o=this._must_find_state(t.channel_id),i=r.from_json(e.channel_state),n=[];for(const t of e.payloads)this._compare_revisions(t.revision,o.revision)>0&&n.push(new a(t.revision,t.payload));n.length>0&&s.push(new l(i,n)),this._compare_revisions(t.revision,o.revision)>0&&(o.revision=t.revision,o.token=t.token)}return s}}unsubscribe(){return delete this._additional_headers["X-Bolt-Session"],super.unsubscribe()}_subscribe_endpoint(){return"/2/payloads/subscribe"}}})),define("metaserver/static/js/clean/event_handler",["require","exports","tslib","jquery"],(function(t,e,s,o){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.EventHandler=e.EventHandlerMixin=e.eventHandler=void 0,o=s.__importDefault(o),e.eventHandler=function(t){const s=t.prototype.componentWillMount,o=t.prototype.componentWillUnmount;t.prototype.componentWillMount=function(){e.EventHandlerMixin.componentWillMount.apply(this),s&&"function"==typeof s&&s.apply(this)},t.prototype.componentWillUnmount=function(){o&&"function"==typeof o&&o.apply(this),e.EventHandlerMixin.componentWillUnmount.apply(this)}},e.EventHandlerMixin={componentWillMount(){this.events=new i},componentWillUnmount(){this.events.removeAll()}};class i{on(t,e,s,i,n){"string"!=typeof s&&(n=i,i=s,s=void 0),n&&(i=o.default.proxy(i,n)),this.handlers||(this.handlers=[]),t=(0,o.default)(t),s?t.on(e,s,i):t.on(e,i),this.handlers.push({element:t,event:e,selector:s,callback:i})}removeAll(){this.handlers&&(this.handlers.forEach((function(t){t.selector?t.element.off(t.event,t.selector,t.callback):t.element.off(t.event,t.callback)})),this.handlers=null)}}e.EventHandler=i})),define("metaserver/static/js/clean/event_dispatcher",["require","exports"],(function(t,e){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.EventDispatcher=void 0;e.EventDispatcher=class{constructor(){this.listeners={},this.addListener=(t,e)=>{var s;const o=null!==(s=this.listeners[t])&&void 0!==s?s:[];o.push(e),this.listeners[t]=o},this.removeListener=(t,e)=>{var s;const o=null!==(s=this.listeners[t])&&void 0!==s?s:[],i=o.indexOf(e);i>-1&&o.slice(i,1)},this.trigger=(t,e)=>{var s;for(const o of null!==(s=this.listeners[t])&&void 0!==s?s:[])o(e)}}}})),define("metaserver/static/js/clean/fuzzy",["require","exports"],(function(t,e){"use strict";Object.defineProperty(e,"__esModule",{value:!0});const s={simpleFilter:(t,e)=>e.filter(e=>s.test(t,e)),test:(t,e)=>null!==s.match(t,e),match(t,e,s){s=s||{};let o=0;const i=[],n=e.length;let r=0,a=0;const l=s.pre||"",d=s.post||"",c=s.caseSensitive&&e||e.toLowerCase();let u=void 0;t=s.caseSensitive&&t||t.toLowerCase();let p=0;const h=[];let _=0,m=0;for(;p<n;)u=e[p],c[p]===t[o]?(u=l+u+d,m?m+=1:(_=p,m=1),o+=1,a+=1+a):(a=0,m&&(h.push([_,m]),m=0)),r+=a,i[i.length]=u,p++;if(m&&h.push([_,m]),o===t.length)return{highlighted:h,rendered:i.join(""),score:r}},filter:(t,e,o)=>e.reduce((e,i,n)=>s._reduce(t,o,e,i,n),[]).sort(s._sort),_reduce(t,e,o,i,n){const r=e.extract(i),a=s.match(t,r,e);return null!=a&&o.push({string:a.rendered,score:a.score,index:n,original:i}),o},_sort(t,e){const s=e.score-t.score;return s||t.index-e.index}};e.default=s})),define("metaserver/static/js/clean/pagelet_logger",["require","exports","tslib","metaserver/static/js/clean/js_client_stopwatch","metaserver/static/js/clean/web_timing_logger"],(function(t,e,s,o,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.PageletLogger=void 0,i=s.__importStar(i);e.PageletLogger=class{constructor(t,e=[],s=!1,i={}){this.pageletName=t,s?(this.performance=window.performance,this.stopwatchName=this.pageletName+"_client_logging",o.JSStopwatch.create_stopwatch_if_not_exist(this.stopwatchName)):this.stopwatchName=void 0,this.ttiComponents=[],e.map(t=>{this.ttiComponents.push({name:t,isReady:!1})}),this.ttiMarked=!1,this.extraColumns=i}componentReady(t){if(this.ttiMarked)return;let e=!1;for(let s=0;s<this.ttiComponents.length;++s)this.ttiComponents[s].name!==t||this.ttiComponents[s].isReady?this.ttiComponents[s].isReady||(e=!0):(this.ttiComponents[s].isReady=!0,o.JSStopwatch.recordTrace(t+"_since_start",{stopwatchName:this.stopwatchName}),console.timeStamp&&console.timeStamp(t+" TTI"));e||(i.mark_time_to_interactive(this.extraColumns),this.ttiMarked=!0)}get ttiLogged(){return this.ttiMarked}}})),define("metaserver/static/js/clean/ui/bubble_dropdown_v2",["require","exports","tslib","classnames","react","react-dom","prop-types","lodash","metaserver/static/js/components/ui/css","metaserver/static/js/clean/ui/overlay","metaserver/static/js/clean/ui/sticky_position"],(function(t,e,s,o,i,n,r,a,l,d,c){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.BubbleDropdown=e.BubbleDropdownContents=e.POSITION_TO_CSS_CLASS_MAP=void 0,o=s.__importDefault(o),i=s.__importDefault(i),n=s.__importStar(n),r=s.__importDefault(r),a=s.__importStar(a),e.POSITION_TO_CSS_CLASS_MAP={[c.StickyPosition.TOP_LEFT]:"top-left",[c.StickyPosition.TOP]:"top",[c.StickyPosition.TOP_RIGHT]:"top-right",[c.StickyPosition.LEFT_TOP]:"left-top",[c.StickyPosition.LEFT]:"left",[c.StickyPosition.LEFT_BOTTOM]:"left-bottom",[c.StickyPosition.RIGHT_TOP]:"right-top",[c.StickyPosition.RIGHT]:"right",[c.StickyPosition.RIGHT_BOTTOM]:"right-bottom",[c.StickyPosition.BOTTOM_LEFT]:"bottom-left",[c.StickyPosition.BOTTOM]:"bottom",[c.StickyPosition.BOTTOM_RIGHT]:"bottom-right",[c.StickyPosition.TOP_ALIGN_LEFT]:"top-align-left",[c.StickyPosition.TOP_ALIGN_RIGHT]:"top-align-right",[c.StickyPosition.LEFT_ALIGN_TOP]:"left-align-top",[c.StickyPosition.LEFT_ALIGN_BOTTOM]:"left-align-bottom",[c.StickyPosition.RIGHT_ALIGN_TOP]:"right-align-top",[c.StickyPosition.RIGHT_ALIGN_BOTTOM]:"right-align-bottom",[c.StickyPosition.BOTTOM_ALIGN_LEFT]:"bottom-align-left",[c.StickyPosition.BOTTOM_ALIGN_RIGHT]:"bottom-align-right"};class u extends i.default.Component{constructor(){super(...arguments),this._getArrowStyleFromPosition=()=>e.POSITION_TO_CSS_CLASS_MAP[this.props.position],this._adjustArrowPosition=(t=!1)=>{if(!this.props.shouldShowArrow)return;const e=n.findDOMNode(this.refs.bubbleArrowContainer);if(e){switch(this.props.position){case c.StickyPosition.TOP_ALIGN_LEFT:case c.StickyPosition.BOTTOM_ALIGN_LEFT:e.style.left=this.props.targetNode.offsetWidth/2+"px";break;case c.StickyPosition.TOP_ALIGN_RIGHT:case c.StickyPosition.BOTTOM_ALIGN_RIGHT:e.style.right=this.props.targetNode.offsetWidth/2+"px";break;case c.StickyPosition.LEFT_ALIGN_TOP:case c.StickyPosition.RIGHT_ALIGN_TOP:e.style.top=this.props.targetNode.offsetHeight/2+"px";break;case c.StickyPosition.LEFT_ALIGN_BOTTOM:case c.StickyPosition.RIGHT_ALIGN_BOTTOM:e.style.bottom=this.props.targetNode.offsetHeight/2+"px"}if((!t||t&&this.props.shouldArrowDecrement)&&(this.props.verticalArrowOffset||this.props.horizontalArrowOffset)){const t=getComputedStyle(e);this._getArrowStyleFromPosition().match(/^(top|bottom)/)&&(e.style.left=String(parseFloat(t.left)-this.props.horizontalArrowOffset)+"px"),this._getArrowStyleFromPosition().match(/^(left|right)/)&&(e.style.top=String(parseFloat(t.top)-this.props.verticalArrowOffset)+"px")}}}}componentDidMount(){return this._adjustArrowPosition()}componentDidUpdate(){return this._adjustArrowPosition(!0)}render(){return i.default.createElement("div",{className:this.props.isMaestroDesign?"maestro":""},i.default.createElement("div",{ref:"dropdown",className:(0,o.default)("bubble-dropdown-v2",`bubble-dropdown-v2--${this._getArrowStyleFromPosition()}`,this.props.className),"aria-labelledby":this.props.targetNode.id},this.props.children,this.props.shouldShowArrow?i.default.createElement("div",{ref:"bubbleArrowContainer",className:"bubble-arrow-container"},i.default.createElement("div",{className:"bubble-arrow-border"}),i.default.createElement("div",{className:"bubble-arrow"})):null))}}e.BubbleDropdownContents=u,u.displayName="BubbleDropdownContents",u.propTypes={targetNode:r.default.instanceOf(HTMLElement).isRequired,position:r.default.oneOf([c.StickyPosition.TOP_LEFT,c.StickyPosition.TOP,c.StickyPosition.TOP_RIGHT,c.StickyPosition.LEFT_TOP,c.StickyPosition.LEFT,c.StickyPosition.LEFT_BOTTOM,c.StickyPosition.RIGHT_TOP,c.StickyPosition.RIGHT,c.StickyPosition.RIGHT_BOTTOM,c.StickyPosition.BOTTOM_LEFT,c.StickyPosition.BOTTOM,c.StickyPosition.BOTTOM_RIGHT,c.StickyPosition.TOP_ALIGN_LEFT,c.StickyPosition.TOP_ALIGN_RIGHT,c.StickyPosition.LEFT_ALIGN_TOP,c.StickyPosition.LEFT_ALIGN_BOTTOM,c.StickyPosition.RIGHT_ALIGN_TOP,c.StickyPosition.RIGHT_ALIGN_BOTTOM,c.StickyPosition.BOTTOM_ALIGN_LEFT,c.StickyPosition.BOTTOM_ALIGN_RIGHT]),verticalArrowOffset:r.default.number,horizontalArrowOffset:r.default.number,shouldShowArrow:r.default.bool,shouldArrowDecrement:r.default.bool,className:r.default.string,isMaestroDesign:r.default.bool},u.defaultProps={verticalArrowOffset:0,horizontalArrowOffset:0,shouldShowArrow:!0,shouldArrowDecrement:!0,className:null,isMaestroDesign:!1};class p extends i.default.Component{constructor(){super(...arguments),this.state={isVisible:!1,targetNode:null,shouldAutoFocusDropdownContent:!1},this.hasOnShowNotBeenCalledSinceLastOpened=!1,this.updateTargetNode=()=>{const t=n.findDOMNode(this.refs.bubbleDropdownContainer).childNodes[0];return t&&(t.setAttribute("aria-expanded",this.state.isVisible),t.hasAttribute("id")||t.setAttribute("id",`bubbleDropdownTarget-${a.uniqueId()}`)),this.setState({targetNode:t})},this.showDropdown=()=>{if(!this.props.disabled)return this.setState({isVisible:!0})},this.hideDropdown=()=>{if(!this.props.disabled)return this.setState({isVisible:!1})},this._handleClick=t=>{const e=!(t.clientX>0&&t.clientY>0);return this.setState({shouldAutoFocusDropdownContent:e},this._toggle)},this._toggle=()=>{if(!this.props.disabled)return this.setState({isVisible:!this.state.isVisible})},this._hasShown=()=>{if(this.hasOnShowNotBeenCalledSinceLastOpened)return this.state.targetNode.setAttribute("aria-expanded",!0),this.props.onShowDropdown(),this.hasOnShowNotBeenCalledSinceLastOpened=!1},this._hasHidden=()=>(this.state.targetNode.setAttribute("aria-expanded",!1),this.props.onHideDropdown())}componentDidMount(){return this.updateTargetNode()}UNSAFE_componentWillUpdate(t,e){this.state.isVisible&&!this.props.disabled||!e.isVisible||t.disabled||(this.hasOnShowNotBeenCalledSinceLastOpened=!0)}componentDidUpdate(t,e){if(e.isVisible!==this.state.isVisible&&(this.state.isVisible||this._hasHidden()),n.findDOMNode(this.refs.bubbleDropdownContainer).childNodes[0]!==this.state.targetNode)return this.updateTargetNode()}render(){const{targetNode:t}=this.state;return i.default.createElement("div",{className:"bubble-dropdown-v2-container",onClick:this._handleClick,ref:"bubbleDropdownContainer"},this.props.targetButton,this.state.isVisible&&!this.props.disabled&&t?i.default.createElement(d.PositionedOverlay,{targetNode:t,isTargetPositionFixed:this.props.targetFixed,isContentFocusable:this.props.isContentFocusable,shouldTrapKeyboardFocus:this.props.shouldTrapKeyboardFocus,shouldAutoFocusOverlayContent:this.state.shouldAutoFocusDropdownContent,position:this.props.position,positionOffset:{horizontal:this.props.horizontalDisplacement,vertical:this.props.verticalDisplacement},onRendered:()=>this._hasShown(),onBlur:()=>this.hideDropdown()},i.default.createElement(u,{ref:"bubbleDropdownContents",targetNode:t,position:this.props.position,verticalArrowOffset:this.props.verticalDisplacement,horizontalArrowOffset:this.props.horizontalDisplacement,shouldShowArrow:this.props.shouldShowArrow,className:this.props.className,shouldArrowDecrement:this.props.shouldArrowDecrement,isMaestroDesign:this.props.isMaestroDesign},this.props.children)):void 0)}}p.displayName="BubbleDropdown",p.propTypes={targetButton(t,e,s){if(null==t.targetButton||"button"!==t.targetButton.type)return new Error("BubbleDropdown's targetButton must be a `<button>`")},position:r.default.oneOf([c.StickyPosition.TOP_LEFT,c.StickyPosition.TOP,c.StickyPosition.TOP_RIGHT,c.StickyPosition.LEFT_TOP,c.StickyPosition.LEFT,c.StickyPosition.LEFT_BOTTOM,c.StickyPosition.RIGHT_TOP,c.StickyPosition.RIGHT,c.StickyPosition.RIGHT_BOTTOM,c.StickyPosition.BOTTOM_LEFT,c.StickyPosition.BOTTOM,c.StickyPosition.BOTTOM_RIGHT,c.StickyPosition.TOP_ALIGN_LEFT,c.StickyPosition.TOP_ALIGN_RIGHT,c.StickyPosition.LEFT_ALIGN_TOP,c.StickyPosition.LEFT_ALIGN_BOTTOM,c.StickyPosition.RIGHT_ALIGN_TOP,c.StickyPosition.RIGHT_ALIGN_BOTTOM,c.StickyPosition.BOTTOM_ALIGN_LEFT,c.StickyPosition.BOTTOM_ALIGN_RIGHT]),targetFixed:r.default.bool,verticalDisplacement:r.default.number,horizontalDisplacement:r.default.number,className:r.default.string,disabled:r.default.bool,shouldShowArrow:r.default.bool,isContentFocusable:r.default.bool,shouldTrapKeyboardFocus:r.default.bool,onShowDropdown:r.default.func,onHideDropdown:r.default.func,shouldArrowDecrement:r.default.bool,isMaestroDesign:r.default.bool},p.defaultProps={targetFixed:!1,verticalDisplacement:0,horizontalDisplacement:0,className:null,disabled:!1,shouldShowArrow:!0,isContentFocusable:!0,shouldTrapKeyboardFocus:!1,onShowDropdown:a.noop,onHideDropdown:a.noop,shouldArrowDecrement:!0,isMaestroDesign:!1},e.BubbleDropdown=(0,l.requireCssWithComponent)(p,["/static/metaserver/static/css/components/bubble_dropdown_v2-vflhhYVBe.css"])})),define("metaserver/static/js/clean/ui/hidden",["require","exports","tslib","react","prop-types","lodash"],(function(t,e,s,o,i,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.HiddenSelect=e.Hidden=void 0,o=s.__importDefault(o),i=s.__importDefault(i),n=s.__importStar(n);class r extends o.default.Component{render(){return o.default.createElement("div",{className:"hidden-option"},this.props.children)}}e.Hidden=r,r.displayName="Hidden";class a extends o.default.Component{render(){return o.default.createElement(r,null,o.default.createElement("select",Object.assign({},n.omit(this.props,"options")),Array.from(this.props.options).map(t=>o.default.createElement("option",{key:t,label:t,value:t}))))}}e.HiddenSelect=a,a.displayName="HiddenSelect",a.propTypes={options:i.default.arrayOf(i.default.any).isRequired,value:i.default.any}})),define("metaserver/static/js/rebrand/elements/rebrand_buttons",["require","exports","tslib","react","classnames","lodash","metaserver/static/js/components/ui/css"],(function(t,e,s,o,i,n,r){"use strict";function a(t="primary",e=!1,s="small",o=null,n=null,r=!1){const a=`button--${s}`;let l="";o&&(l=`${a}--${o}`);const d=`button--${t}`;let c="";return e&&(c=`${d}--disabled`),(0,i.default)({"button--with-border":"secondary"===t&&r},"button",d,a,l,n,c)}function l(t){t.preventDefault()}function d(){}Object.defineProperty(e,"__esModule",{value:!0}),e.RebrandButton=e.RebrandButtonElement=e.RebrandButtonAnchor=e.RebrandButtonAnchorElement=void 0,o=s.__importDefault(o),i=s.__importDefault(i),n=s.__importStar(n);class c extends o.default.Component{render(){const{ariaLabel:t,importance:e,disabled:s,size:i,width:n,className:r,withBorder:c,trackingId:u}=this.props,p=a(e,s,i,n,r,c);return o.default.createElement("a",{href:this.props.href,className:p,onClick:s?l:d,"aria-label":t,"aria-disabled":s,"data-trackingid":u,"data-uxa-log":u},this.props.children)}}e.RebrandButtonAnchorElement=c,c.displayName="RebrandButtonAnchorElement",e.RebrandButtonAnchor=(0,r.requireCssWithComponent)(c,["/static/metaserver/static/css/rebrand/elements/button-vflIddG9V.css"]);class u extends o.default.Component{render(){const t=this.props,{importance:e,disabled:i,size:r,width:l,className:d,onClick:c,type:u,trackingId:p}=t,h=s.__rest(t,["importance","disabled","size","width","className","onClick","type","trackingId"]),_=a(e,i,r,l,d),m=n.pickBy(h,(t,e)=>e.startsWith("data-"));return o.default.createElement("button",Object.assign({className:_,onClick:c,disabled:i,type:u||"button","data-uxa-log":p,"aria-label":this.props.ariaLabel},m),this.props.children)}}e.RebrandButtonElement=u,u.displayName="RebrandButtonElement",e.RebrandButton=(0,r.requireCssWithComponent)(u,["/static/metaserver/static/css/rebrand/elements/button-vflIddG9V.css"])})),define("metaserver/static/js/clean/ui/util",["require","exports","tslib","react"],(function(t,e,s,o){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.setStatePromise=e.replaceSubtree=e.mergeProps=e.getText=void 0,o=s.__importDefault(o);var i=function(t){if("string"==typeof t)return t;if("string"==typeof t.props)return t.props;if(t.props.text)return t.props.text;const e=[];return o.default.Children.forEach(t.props.children,t=>e.push(i(t))),e.join("")};e.getText=i;var n=function(t,e,s){if(e(t))return s(t);{let i=!1;const r=[];return o.default.Children.forEach(t.props.children,t=>{const o=n(t,e,s);if(r.push(o),o!==t)return i=!0}),i?o.default.cloneElement(t,{},r):t}};e.replaceSubtree=n;e.mergeProps=function(...t){const e={},s=[];for(const o of Array.from(t))for(const t of Object.keys(o||{})){const i=o[t];"className"===t?s.push(i):e[t]=i}return null!=s.length&&(e.className=s.join(" ")),e};e.setStatePromise=(t,e)=>new Promise((function(s,o){return t.setState(e,s)}))})),define("metaserver/static/js/core/user_i18n",["require","exports","tslib","metaserver/static/js/modules/constants/page_load"],(function(t,e,s,o){"use strict";function i(){return-1!==["zh","ja","ko"].indexOf(o.USER_LOCALE)}function n(t){const e=[],s=t.length;let o=0;for(;o<s;){const i=t[o];if(i>="\ud800"&&i<="\udb7f"){if(!(o<s-1))break;{const s=i+t[o+1];e.push(s),o+=2}}else e.push(i),o+=1}return e}Object.defineProperty(e,"__esModule",{value:!0}),e.isCjkLocale=e.getShortName=e.getInitials=void 0,o=s.__importStar(o),e.getInitials=function(t){if(!t)return"";const e=(t=t.toUpperCase()).trim().split(" "),s=n(e[0]),o=n(e[e.length-1]);if(e.length>=2)return i()?o[0]+s[0]:s[0]+o[0];const r=n(t);return i()&&!(function(t){for(let e=0;e<t.length;e++)if(t.charCodeAt(e)>=128)return!1;return!0})(t)&&r.length>1?r[0]+r[1]:r[0]},e.getShortName=function(t){if(!t)return"";const e=t.trim().split(" ");if(e.length<2)return t;const s=e[0],o=n(e[e.length-1]);return i()?o[0]+" "+s:s+" "+o[0]},e.isCjkLocale=i})),define("metaserver/static/js/clean/ui/tooltip",["require","exports","tslib","react","react-dom","prop-types","lodash"],(function(t,e,s,o,i,n,r){"use strict";let a;Object.defineProperty(e,"__esModule",{value:!0}),e.TooltipPosition=e.Tooltip=void 0,o=s.__importDefault(o),i=s.__importStar(i),n=s.__importDefault(n),r=s.__importStar(r);const l={TOP:0,BOTTOM:1,LEFT:2,RIGHT:3,BOTTOM_RIGHT:4};e.TooltipPosition=l;const d=function(){let t=document.getElementById("tooltip-holder");return t||(t=document.createElement("div"),t.id="tooltip-holder",t.style.zIndex="10000",document.body.insertBefore(t,document.body.firstChild)),t},c=()=>{const t=d();i.unmountComponentAtNode(t),t.parentNode.removeChild(t)},u=function(t){const{top:e,left:s}=t.getBoundingClientRect(),o=e+document.body.scrollTop,i=s+document.body.scrollLeft,{width:n,height:r}=(function(t){if(0!==t.offsetWidth&&0!==t.offsetHeight)return{height:t.offsetHeight,width:t.offsetWidth};const{display:e,position:s,visibility:o}=t.style;t.style.display="block",t.style.position="absolute",t.style.visibility="hidden";const{offsetWidth:i,offsetHeight:n}=t;return t.style.display=e,t.style.position=s,t.style.visibility=o,{height:n,width:i}})(t);return{left_x:i,right_x:i+n,top_y:o,bottom_y:o+r,width:n,height:r}};class p extends o.default.Component{constructor(){super(...arguments),this._centerAndShow=()=>{const t=i.findDOMNode(this.refs.tooltip),e=this.props.targetElementDimensions,s=u(t),o=document.body.scrollTop,n=document.body.scrollLeft;if([l.TOP,l.BOTTOM].includes(this.props.position)){const o=window.innerWidth;let i=e.left_x+e.width/2-s.width/2-n;i<0?i=0:i+s.width>o&&(i=o-s.width-7),t.style.left=`${i}px`}else if([l.LEFT,l.RIGHT].includes(this.props.position)){const i=window.innerHeight;let n=e.top_y+e.height/2-s.height/2-o;n<0?n=0:n+s.height>i&&(n=i-s.height-7),t.style.top=`${n}px`}t.style.display="block"}}render(){const t=this.props.targetElementDimensions,e=window.innerHeight,s=window.innerWidth,i=document.body.scrollTop,n=document.body.scrollLeft,r=(()=>{switch(this.props.position){case l.TOP:return{bottom:e-t.top_y+7+i};case l.BOTTOM:return{top:t.bottom_y+7-i};case l.LEFT:return{right:s-t.left_x+7+n};case l.RIGHT:return{left:t.right_x+7-n};case l.BOTTOM_RIGHT:return{left:t.right_x-7-n,top:t.bottom_y+7-i}}})();return o.default.createElement("div",{className:`tooltip-bubble ${this.props.className||""}`,ref:"tooltip",style:r,onMouseMove:this.props.mouse_move_cb?this.props.mouse_move_cb:void 0,onMouseLeave:this.props.mouse_out_cb?this.props.mouse_out_cb:void 0,onMouseEnter:this.props.mouse_enter_cb?this.props.mouse_enter_cb:void 0},o.default.createElement("div",{className:"tooltip-inner"},this.props.contents))}componentDidMount(){return this._centerAndShow()}componentDidUpdate(){return this._centerAndShow()}}p.displayName="TooltipBubble",p.propTypes={position:n.default.oneOf((()=>{const t=[];for(a in l)t.push(l[a]);return t})()),contents:n.default.oneOfType([n.default.element,n.default.string]),className:n.default.string,mouse_move_cb:n.default.func,mouse_out_cb:n.default.func,mouse_enter_cb:n.default.func,targetElementDimensions:n.default.shape({left_x:n.default.number,right_x:n.default.number,top_y:n.default.number,bottom_y:n.default.number,width:n.default.number,height:n.default.number})};class h extends o.default.Component{constructor(){super(...arguments),this._scrollEventHandler=t=>this._hide(t),this._escapeEventHandler=t=>{"Escape"===t.key&&this._hide(t)},this.state={visible:!1,event_id:r.uniqueId()},this._on_mouse_enter=()=>{this.props.show_delay>0?this._scheduleShow():this._show()},this._on_mouse_leave=()=>{this.props.hide_delay>0?this._scheduleHide(this.props.hide_delay):this._hide()},this._render_tooltip=()=>{c();const t=d(),e=document.getElementById("tooltip-holder");if(!e)return;e.style.position="fixed",e.style.left="0",e.style.right="0",this.props.hide_delay>0&&e.setAttribute("data-event-id",this.state.event_id),this.props.position===l.TOP?(e.style.top="auto",e.style.bottom="0"):(e.style.top="0",e.style.bottom="auto");const s=o.default.createElement(p,{position:this.props.position,contents:this.props.tooltip_contents,className:this.props.tooltip_classname,mouse_move_cb:this.props.interaction_enabled?this._clear_timeout:void 0,mouse_out_cb:this.props.interaction_enabled?this._on_mouse_leave:void 0,mouse_enter_cb:this.props.interaction_enabled?this._on_mouse_enter:void 0,targetElementDimensions:u(i.findDOMNode(this.refs.tooltipTarget))});return i.render(s,t)},this._show=()=>{if(!this.state.visible||this._last_timeout)return this._render_tooltip(),this.setState({visible:!0}),this.props.on_show&&this.props.on_show(),this._clear_timeout()},this._hide=()=>{if(!this.state.visible)return;const t=d();if(this._last_timeout){t.getAttribute("data-event-id")===this.state.event_id&&(c(),this._clear_timeout())}else c();return this.setState({visible:!1})},this._scheduleHide=t=>{if(this.state.visible)return this._last_timeout=setTimeout(this._hide,t)},this._clear_timeout=()=>{if(this._last_timeout)return clearTimeout(this._last_timeout),this._last_timeout=null},this._scheduleShow=()=>(this._clear_timeout(),this._last_timeout=setTimeout(this._show,this.props.show_delay))}render(){return o.default.createElement("div",{className:"tooltip-target",onMouseEnter:this._on_mouse_enter,onFocus:this._show,onMouseLeave:this._on_mouse_leave,onBlur:this._on_mouse_leave,id:this.state.tooltip_id,ref:"tooltipTarget",tabIndex:this.props.is_focusable?0:void 0},this.props.children)}componentDidMount(){document.addEventListener("keydown",this._escapeEventHandler),document.addEventListener("scroll",this._scrollEventHandler)}componentDidUpdate(){if(this.state.visible)return this._render_tooltip()}componentWillUnmount(){document.removeEventListener("keydown",this._escapeEventHandler),document.removeEventListener("scroll",this._scrollEventHandler),c()}}e.Tooltip=h,h.displayName="Tooltip",h.propTypes={position:n.default.oneOf((()=>{const t=[];for(a in l)t.push(l[a]);return t})()),tooltip_contents:n.default.oneOfType([n.default.oneOfType([n.default.element,n.default.string]),n.default.arrayOf(n.default.oneOfType([n.default.element,n.default.string]))]),tooltip_classname:n.default.string,hide_delay:n.default.number,show_delay:n.default.number,interaction_enabled:n.default.bool,is_focusable:n.default.bool,on_show:n.default.func},h.defaultProps={interaction_enabled:!1,hide_delay:0,show_delay:0}})),define("metaserver/static/js/clean/portaled-snackbar",["require","exports","tslib","react","react-dom","styled-components","dig-components/snackbar","dig-components/buttons","metaserver/static/js/core/i18n"],(function(t,e,s,o,i,n,r,a,l){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.PortaledSnackbar=void 0,o=s.__importDefault(o),i=s.__importDefault(i);const d=(n=s.__importDefault(n)).default.div`
  position: fixed;
  width: 100%;
  bottom: 6vh;
  margin: auto;
  z-index: 20;
  display: flex;
  justify-content: center;
`,c=(0,n.default)(r.Snackbar)`
  flex-grow: 1;
`,u=document.getElementsByTagName("body")[0];e.PortaledSnackbar=({children:t,close:e,isOpen:s=!0,timeoutInMs:n=5e3})=>"boolean"==typeof RUNNING_IN_REACTSERVER?o.default.createElement(o.default.Fragment,null):i.default.createPortal(o.default.createElement(d,null,o.default.createElement(c,{open:s,timeout:n,onRequestClose:e},o.default.createElement(r.Snackbar.Message,null,t),o.default.createElement(r.Snackbar.Actions,null,o.default.createElement(a.Button,{variant:"transparent",inverse:!0,onClick:e},l.intl.formatMessage({id:"WxV0Sy",defaultMessage:"Dismiss"}))))),u),e.PortaledSnackbar.displayName="PortaledSnackbar"})),define("metaserver/static/js/deprecated_ajax/ajax_form_extract_errors",["require","exports","metaserver/static/js/core/i18n"],(function(t,e,s){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.extractErrors=void 0;e.extractErrors=t=>{try{return 0===t.indexOf("err:")&&(t=t.substr(4),JSON.parse(t))}catch(e){return"string"==typeof t?t:s.intl.formatMessage({id:"bLA3rA",defaultMessage:"There was a problem completing this request."})}}}));
//# sourceMappingURL=pkg-modules-unneeded-for-home.min.js-vflphPonv.map