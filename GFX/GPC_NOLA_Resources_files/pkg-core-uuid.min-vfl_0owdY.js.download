define("metaserver/static/js/api_v2/transport/beacon",["require","exports","tslib","metaserver/static/js/api_v2/types","metaserver/static/js/api_v2/transport/fetch","sjcl"],(function(e,t,r,s,n,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.BeaconTransport=void 0,a=r.__importStar(a);t.BeaconTransport=class{executeRpc(e,t,r,c){var i;const o=null===(i=navigator.sendBeacon)||void 0===i?void 0:i.bind(navigator);if(o)return new Promise((function(n,i){var u;const d=(function(e,t){const r=a.codec.utf8String.toBits(e),s=new a.misc.hmac(r,a.hash.sha256).encrypt(t);return a.codec.base64url.fromBits(s)})(null!==(u=t[s.ApiV2HeaderNames.CsrfToken])&&void 0!==u?u:"",e.getPath());e.updateQuery({t:d});const l=new Blob([r,JSON.stringify(Object.assign(Object.assign({},t),{"Content-Type":c}))],{type:c}),p=o(e.toString(),l),y={result:JSON.parse(JSON.stringify({beacon:p})),headers:t};return p?n(y):i(y)}));return(new n.FetchAsyncTransport).executeRpc(e,t,r,c)}executeBinaryRpc(e,t,r,s){return(new n.FetchAsyncTransport).executeBinaryRpc(e,t,r,s)}}})),define("metaserver/static/js/security/sjcl_crypto",["require","exports","tslib","sjcl"],(function(e,t,r,s){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.getRandomValues=void 0,s=r.__importStar(s),t.getRandomValues=function(e){const t=s.random.randomWords(e.length);for(let r=0,s=e.length,n=0<=s;n?r<s:r>s;n?r++:r--)e[r]=t[r];return e}})),define("metaserver/static/js/uuid/uuid",["require","exports","metaserver/static/js/uuid/insecure_uuid","metaserver/static/js/security/sjcl_crypto"],(function(e,t,r,s){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.UUID=void 0;const n=/generator isn't seeded/;class a extends r.InsecureUUID{static getRandomBytes(e={}){if("boolean"==typeof RUNNING_IN_REACTSERVER)return new Array(16).fill(0);const t=new Array(16);try{(0,s.getRandomValues)(t)}catch(r){if(r.message.match(n)&&e.allowInsecure)return this.getInsecureRandomValues(t);throw r}return t.map(e=>this.toByte(e))}static v4(e={}){const t=this.getRandomBytes({allowInsecure:e.allowInsecure});return t[6]=15&t[6]|64,t[8]=63&t[8]|128,this.bytesToUUIDString(t)}}t.UUID=a}));
//# sourceMappingURL=pkg-core-uuid.min.js-vfl34biPA.map