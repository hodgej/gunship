define("metaserver/static/js/account/change_email_modals",["require","exports","tslib","react","ts-key-enum","metaserver/static/js/account/email_verify_reasons","metaserver/static/js/account/set_password_modal","metaserver/static/js/clean/form","metaserver/static/js/clean/ui/input_dig","metaserver/static/js/components/ui/modal_controller","metaserver/static/js/clean/ui/modal_dig","metaserver/static/js/clean/viewer","metaserver/static/js/core/i18n","metaserver/static/js/core/notify","styled-components"],(function(e,t,a,s,i,r,o,n,l,m,d,u,c,f,h){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.ChangeEmailModal=t.ChangeEmailWarningModal=void 0,s=a.__importDefault(s),n=a.__importStar(n),l=a.__importStar(l),m=a.__importStar(m),h=a.__importDefault(h);const g=l.text,p=l.password,_=[r.EmailVerificationReasons.ADD_COMMENT,r.EmailVerificationReasons.SUBSCRIBE_TO_COMMENTS,r.EmailVerificationReasons.SHARE_FILEVIEWER],v=h.default.div`
  .change-email-input {
    width: 100%;
  }
`;class y extends s.default.Component{constructor(){super(...arguments),this.getSSOWarning=()=>{const{is_paired:e}=u.Viewer.get_viewer(),t=e&&"work"===this.props.user.role,a=this.props.user.sso_required;return t&&a?s.default.createElement("div",{className:"db-modal-message"},c.intl.formatMessage({id:"E+nkeD",defaultMessage:"Your {team} Dropbox uses single sign-on. If you change your email address you may not be able to sign in."},{team:u.Viewer.get_viewer().team_name})):null},this.getInboxWarning=()=>{const{is_paired:e}=u.Viewer.get_viewer();if(0===this.props.inboxCount)return null;let t=c.intl.formatMessage({id:"TwUPS4",defaultMessage:"{count, plural, one{Your {count} existing shared folder invitation will be removed if you change your email address.} other{Your {count} existing shared folder invitations will be removed if you change your email address.}}"},{count:this.props.inboxCount});return e&&"personal"===this.props.user.role?t=c.intl.formatMessage({id:"hImpHR",defaultMessage:"{count, plural, one{Your {count} existing shared folder invitation in your personal Dropbox will be removed if you change your email address.} other{Your {count} existing shared folder invitations in your personal Dropbox will be removed if you change your email address.}}"},{count:this.props.inboxCount}):e&&"work"===this.props.user.role&&c.intl.formatMessage({id:"LTnOTV",defaultMessage:"{count, plural, one{Your {count} existing shared folder invitation in your {team} Dropbox will be removed if you change your email address.} other{Your {count} existing shared folder invitations in your {team} Dropbox will be removed if you change your email address.}}"},{count:this.props.inboxCount,team:u.Viewer.get_viewer().team_name}),s.default.createElement("div",{className:"db-modal-message"},t)},this.showChange=e=>{var t,a;return e.preventDefault(),this.refs.modal.close(),null===(a=(t=this.props).onContinue)||void 0===a?void 0:a.call(t)}}render(){return s.default.createElement(d.Modal,{title:c.intl.formatMessage({id:"VUO2oS",defaultMessage:"Warning!"}),acceptButtonText:c.intl.formatMessage({id:"3654OT",defaultMessage:"Continue anyway"}),dismissButtonText:c.intl.formatMessage({id:"JKXEU8",defaultMessage:"Cancel"}),onAccept:this.showChange,ref:"modal",style:"default-maestro"},this.getSSOWarning(),this.getInboxWarning())}}t.ChangeEmailWarningModal=y,y.displayName="ChangeEmailWarningModal";class E extends s.default.Component{constructor(){super(...arguments),this.displayName="ChangeEmailModal",this.mounted=!1,this.state={submitting:!1,errors:{},userConfirmedSetPassword:!1},this.formRef=s.default.createRef(),this.handleKey=e=>{e.key===i.Key.Enter&&"INPUT"===(null!=e.target?e.currentTarget.tagName:void 0)&&this.handleSubmit(e)},this.handleSubmit=e=>{if(e.preventDefault(),!this.state.submitting)return this.submit()},this.submit=()=>{this.setState({submitting:!0,errors:{}});const e=this.formRef.current;return n.submit(e,this._success,this._error,this._complete)},this._success=e=>{var t,a,s,i;const r=this.formRef.current,o=null!==(a=null===(t=null==r?void 0:r.querySelector('input[name="email"]'))||void 0===t?void 0:t.value)&&void 0!==a?a:"",n="NEEDS_VERIFICATION"===e;return m.unmountModal(),n?null===(s=this.props)||void 0===s?void 0:s.onVerificationCheck(o):null===(i=this.props)||void 0===i?void 0:i.onChange(o)},this._error=e=>"string"==typeof e?f.Notify.error(e):e?this.setState({errors:e}):f.Notify.error(c.intl.formatMessage({id:"A1ZtqA",defaultMessage:"There was a problem completing this request."})),this._complete=()=>{if(this.mounted)return this.setState({submitting:!1})},this.getPrompt=()=>{const{is_paired:e}=u.Viewer.get_viewer(),t=this.props.user.email_verified;return e&&"personal"===this.props.user.role?t?c.intl.formatMessage({id:"SSo9BY",defaultMessage:"Enter a new email address for your personal Dropbox. You’ll need to verify your new email address in order to finish updating your personal email."}):c.intl.formatMessage({id:"2v/Ulh",defaultMessage:"Enter a new email address for your personal Dropbox."}):e&&"work"===this.props.user.role?t?c.intl.formatMessage({id:"w72QA8",defaultMessage:"Enter a new email address for your {team} Dropbox. You’ll need to verify your new email address in order to finish updating your {team} email."},{team:u.Viewer.get_viewer().team_name}):c.intl.formatMessage({id:"DbvzPc",defaultMessage:"Enter a new email address for your personal Dropbox."}):t?c.intl.formatMessage({id:"BFwGQf",defaultMessage:"You’ll need to verify your new email address in order to finish updating your email."}):""}}render(){return this.props.user.has_never_set_password&&!this.state.userConfirmedSetPassword?s.default.createElement(o.SetPasswordModal,{email:this.props.user.email,reason:c.intl.formatMessage({id:"Vrzvo2",defaultMessage:"For your security, Dropbox requires you to set a password to change your email."}),onUserConfirm:()=>this.setState({userConfirmedSetPassword:!0})}):this.props.reason&&_.includes(this.props.reason)?s.default.createElement(d.Modal,{title:c.intl.formatMessage({id:"THOQIj",defaultMessage:"Update ‘{email}’"},{email:this.props.user.email}),className:"change-email-modal--maestro",acceptButtonText:c.intl.formatMessage({id:"hPUPiA",defaultMessage:"Update email"}),dismissButtonText:c.intl.formatMessage({id:"8fk5Hk",defaultMessage:"Cancel"}),onAccept:this.handleSubmit,submitting:this.state.submitting,ref:"modal",style:"default-maestro"},s.default.createElement(v,null,s.default.createElement("form",{action:"/account/change_email",className:"change-email-form",onSubmit:this.handleSubmit,onKeyDown:this.handleKey,ref:this.formRef},s.default.createElement("div",{className:"change-email-message"},this.getPrompt()),s.default.createElement("div",{className:"change-email-inputs"},s.default.createElement("div",{className:"change-email-input"},s.default.createElement("div",{className:"change-email-input-label"},c.intl.formatMessage({id:"mMKYfC",defaultMessage:"New email"})),s.default.createElement(g,{className:"change-email-input",name:"email",label:c.intl.formatMessage({id:"R5DNWc",defaultMessage:"you@mail.com"}),error:this.state.errors.email,autoComplete:"off"})),s.default.createElement("div",{className:"change-email-input"},s.default.createElement("div",{className:"change-email-input-label"},c.intl.formatMessage({id:"VvZ36k",defaultMessage:"Confirm email"})),s.default.createElement(g,{className:"change-email-input",name:"confirm_email",label:c.intl.formatMessage({id:"R5DNWc",defaultMessage:"you@mail.com"}),error:this.state.errors.confirm_email,autoComplete:"off"})),s.default.createElement("div",{className:"change-email-input"},s.default.createElement("div",{className:"change-email-input-label"},c.intl.formatMessage({id:"ICoFby",defaultMessage:"Dropbox password"})),s.default.createElement(p,{className:"change-email-input",name:"password",label:c.intl.formatMessage({id:"Lo93wl",defaultMessage:"Minimum 5 characters"}),error:this.state.errors.password,autoComplete:"off"})),s.default.createElement("input",{type:"hidden",name:"_subject_uid",value:this.props.user.id}),s.default.createElement("input",{type:"hidden",name:"from_checkup",value:`${!!this.props.fromCheckup}`}))))):s.default.createElement(d.Modal,{title:c.intl.formatMessage({id:"THOQIj",defaultMessage:"Update ‘{email}’"},{email:this.props.user.email}),className:"change-email-modal",acceptButtonText:c.intl.formatMessage({id:"hPUPiA",defaultMessage:"Update email"}),dismissButtonText:c.intl.formatMessage({id:"8fk5Hk",defaultMessage:"Cancel"}),onAccept:this.handleSubmit,submitting:this.state.submitting,ref:"modal"},s.default.createElement(v,null,s.default.createElement("form",{action:"/account/change_email",className:"change-email-form",onSubmit:this.handleSubmit,onKeyDown:this.handleKey,ref:this.formRef},s.default.createElement("div",null,this.getPrompt()),s.default.createElement("div",{className:"change-email-inputs"},s.default.createElement(g,{className:"change-email-input",name:"email",placeholder:c.intl.formatMessage({id:"mMKYfC",defaultMessage:"New email"}),error:this.state.errors.email,autoComplete:"off"}),s.default.createElement(g,{className:"change-email-input",name:"confirm_email",placeholder:c.intl.formatMessage({id:"VvZ36k",defaultMessage:"Confirm email"}),error:this.state.errors.confirm_email,autoComplete:"off"}),s.default.createElement(p,{className:"change-email-input",name:"password",placeholder:c.intl.formatMessage({id:"TA7IaN",defaultMessage:"Dropbox password"}),error:this.state.errors.password,autoComplete:"off"}),s.default.createElement("input",{type:"hidden",name:"_subject_uid",value:this.props.user.id}),s.default.createElement("input",{type:"hidden",name:"from_checkup",value:`${!!this.props.fromCheckup}`})))))}componentDidMount(){this.mounted=!0}componentWillUnmount(){this.mounted=!1}}t.ChangeEmailModal=E,E.displayName="ChangeEmailModal"})),define("metaserver/static/js/account/email",["require","exports","tslib","react","metaserver/static/js/account/change_email_modals","metaserver/static/js/account/email_verify","metaserver/static/js/account/email_verify_reasons","metaserver/static/js/account/verify_email_modals","metaserver/static/js/components/ui/modal_controller","metaserver/static/js/clean/viewer","metaserver/static/js/core/browser","metaserver/static/js/core/exception","metaserver/static/js/core/i18n","metaserver/static/js/core/notify","metaserver/static/js/core/uri","metaserver/static/js/clean/event_dispatcher"],(function(e,t,a,s,i,r,o,n,l,m,d,u,c,f,h,g){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.ChangeEmail=t.EmailVerification=void 0,s=a.__importDefault(s),r=a.__importDefault(r),l=a.__importStar(l),d=a.__importStar(d),u=a.__importStar(u);class p{constructor(e){var t;this.role=e,this.user=this.role?m.Viewer.get_viewer().get_user_by_role(this.role,!0):m.Viewer.get_viewer().deprecated_first_user_in_the_cookie,this.email_to_verify=null===(t=this.user)||void 0===t?void 0:t.email,this.verify_for_change=!1}static initClass(){this.prototype.polling=!1,this.prototype.show_resend=!1}static getForRole(e){return this.initalized||(this.legacy=new p(void 0),this.personal=new p("personal"),this.work=new p("work"),null!=this.reason&&this.propagate_reason(),this.initalized=!0),"personal"===e?this.personal:"work"===e?this.work:this.legacy}static get_for_user(e){return this.getForRole(null==e?void 0:e.role)}static reset(){return this.initalized=!1}static set_reason(e){this.reason=e,this.initalized&&this.propagate_reason()}static propagate_reason(){[this.legacy,this.personal,this.work].map(e=>e.reason=this.reason)}set_email_to_verify(e){var t;return null===e&&(e=void 0),this.email_to_verify=e,this.verify_for_change=this.email_to_verify!==(null===(t=this.user)||void 0===t?void 0:t.email)}send_email(e,t){return r.default.send_verification_email(this.user,this.email_to_verify,e,t)}flash_email_sent_notification(){return f.Notify.success(c.intl.formatMessage({id:"EEEqGq",defaultMessage:"Verification email sent to {email}"},{email:this.email_to_verify}))}ensure_polling(e){return r.default.listen_for_verification(this.user,this.email_to_verify,()=>e&&this.user?(this.user.is_email_verified=!0,e()):d.reload())}email_sent(e,t,a){return this.show_resend=!0,this.show(void 0,t),a&&this.flash_email_sent_notification(),this.ensure_polling(e)}show(e,t,a){return t&&p.set_reason(t),this.show_resend?this.show_resend_verify_modal(t,a):this.show_verify_modal(e,t,a)}_inferReason(e){if(e)return o.EmailVerificationReasons.CHANGE_EMAIL;const{reason:t}=p;if(t)return t;u.reportStack("Email Verification reason should not be null",{severity:u.SEVERITY.NONCRITICAL,tags:["email_verify:null_reason"]})}show_verify_modal(e,t,a){return t||(t=this._inferReason(this.verify_for_change)),l.mountModal(s.default.createElement(n.VerifyEmailModal,{user:this.user,reason:t,email:this.email_to_verify,onCancel:a,onShowChange:()=>v.show(this.user,t),onEmailSent:()=>p.get_for_user(this.user).email_sent(e,t,!0)}))}show_resend_verify_modal(e,t){return null==e&&(e=this._inferReason(this.verify_for_change)),l.mountModal(s.default.createElement(n.ResendVerifyEmailModal,{user:this.user,email:this.email_to_verify,reason:e,onShowChange:()=>v.show(this.user,e),onEmailSent:()=>p.get_for_user(this.user).email_sent(void 0,e,!0),onCancel:t}))}verified_or_send_and_show(e,t){var a;return(null===(a=this.user)||void 0===a?void 0:a.is_email_verified)?(t&&t(),!0):(this.send_email(e,()=>this.email_sent(()=>(this.close(),t?t():void 0),e)),!1)}verified_or_show(e,t){return!(!this.user||!this.user.is_email_verified)||(this.show(void 0,e,t),!1)}show_sent_modal(){return l.mountModal(s.default.createElement(n.VerifyEmailSentModal,{email:this.email_to_verify}))}show_verified_modal(){return l.mountModal(s.default.createElement(n.EmailVerifiedModal,{reason:p.reason,email:this.email_to_verify}))}show_verified_and_changed_modal(){return l.mountModal(s.default.createElement(n.ChangedEmailVerifiedModal,{user:this.user,email:this.email_to_verify}))}close(){return l.unmountModal()}}t.EmailVerification=p,p.initClass();const _=new g.EventDispatcher,v={show:(e,t)=>v._should_show_warning(e)?v._show_warning_modal(e,t):v._show_change_modal(e,t),_should_show_warning(e){const{is_paired:t}=m.Viewer.get_viewer();return t&&"work"===(null==e?void 0:e.role)&&(null==e?void 0:e.sso_required)},_show_change_modal:(e,t)=>l.mountModal(s.default.createElement(i.ChangeEmailModal,{user:e,reason:t,onChange:t=>(v.trigger_change(e,t,!1),"/account"!==h.URI.parse(d.get_href()).getPath()?d.redirect("/home?send_verification_email=1"):t!==e.email?d.reload():void 0),onVerificationCheck:a=>{v.trigger_change(e,a,e.is_email_verified);const s=p.get_for_user(e);return s.set_email_to_verify(a),s.email_sent(void 0,t,!0)}})),_show_warning_modal:(e,t)=>l.mountModal(s.default.createElement(i.ChangeEmailWarningModal,{user:e,onContinue:()=>v._show_change_modal(e,t)})),add_listener(e,t){_.addListener(e.id,t)},remove_listener(e,t){_.removeListener(e.id,t)},trigger_change(e,t,a){_.trigger(e.id,{email:t,requiresVerification:a})}};t.ChangeEmail=v})),define("metaserver/static/js/account/email_verify",["require","exports","tslib","metaserver/static/js/deprecated_ajax/ajax_jquery"],(function(e,t,a,s){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),s=a.__importStar(s);const i={_POLLING:{},send_verification_email:(e,t,a,i)=>s.WebRequest({url:"/sendverifyemail",data:{email:t,reason:a},success:()=>null==i?void 0:i(),subject_user:e}),check_verification:(e,t,a,i)=>s.SilentBackgroundRequest({url:"/isemailverified",data:{email:t},success:e=>"ok"===e?a():i(),subject_user:e}),listen_for_verification(e,t,a){const s=`${null==e?void 0:e.id}:${t}`;if(!this._POLLING[s])return this._POLLING[s]=!0,this._poll_for_verification(e,t,a)},_poll_for_verification(e,t,a){return this.check_verification(e,t,a,()=>setTimeout(()=>this._poll_for_verification(e,t,a),4e3))}};t.default=i})),define("metaserver/static/js/account/set_password_modal",["require","exports","tslib","react","metaserver/static/js/deprecated_ajax/ajax_jquery","metaserver/static/js/components/ui/modal_controller","metaserver/static/js/clean/ui/modal_dig","metaserver/static/js/core/i18n","metaserver/static/js/core/notify"],(function(e,t,a,s,i,r,o,n,l){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.SetPasswordModal=void 0,s=a.__importDefault(s),i=a.__importStar(i),r=a.__importStar(r);class m extends s.default.Component{constructor(e){super(e),this.state={sent:!1,submitting:!1}}resetResponseSuccess(e){"OK"===e.status?(l.Notify.success(n.intl.formatMessage({id:"SSwbgo",defaultMessage:"Sent an email to {email}"},{email:this.props.email})),this.setState({sent:!0,submitting:this.state.submitting})):this.resetEmailError()}resetEmailError(){l.Notify.error(n.intl.formatMessage({id:"fUWqZP",defaultMessage:"Could not send email. Please try again"}))}sendResetEmail(e){e.preventDefault(),this.setState({sent:this.state.sent,submitting:!0}),i.FormWebRequest({url:"/ajax_reset_start",data:{email:this.props.email},success:e=>this.resetResponseSuccess(JSON.parse(e)),error:()=>this.resetEmailError(),complete:()=>{this.setState({sent:this.state.sent,submitting:!1})}})}userConfirmSetPassword(){this.props.onUserConfirm?this.props.onUserConfirm():r.unmountModal()}static showInstance(e){r.mountModal(s.default.createElement(m,Object.assign({},e)))}render(){const e=n.intl.formatMessage({id:"W/iS2m",defaultMessage:"Dropbox will send an email to {email} with further instructions. You may need to check your spam folder or unblock no-reply@dropbox.com."},{email:this.props.email}),t=this.state.sent?n.intl.formatMessage({id:"Vep7Pr",defaultMessage:"Resend email"}):n.intl.formatMessage({id:"YZqQHq",defaultMessage:"Send email"}),a=n.intl.formatMessage({id:"WLFHmg",defaultMessage:"I’ve set a password"}),i=this.sendResetEmail.bind(this),r=this.userConfirmSetPassword.bind(this),l=s.default.createElement(o.ModalButtons,null,s.default.createElement(o.ModalButton,{variant:"primary",disabled:!this.state.sent,onClick:r},a),s.default.createElement(o.ModalButton,{variant:"opacity",onClick:i},t));return s.default.createElement(o.Modal,{title:n.intl.formatMessage({id:"6EcMoR",defaultMessage:"Set Password"}),onAccept:()=>this.userConfirmSetPassword(),buttonComponent:l},s.default.createElement("p",null,this.props.reason),s.default.createElement("p",null,e))}}t.SetPasswordModal=m,m.displayName="SetPasswordModal"})),define("metaserver/static/js/account/verify_email_modals",["require","exports","tslib","react","metaserver/static/js/account/email_verify","metaserver/static/js/account/email_verify_reasons","metaserver/static/js/clean/analytics","metaserver/static/js/components/ui/modal_controller","metaserver/static/js/clean/ui/modal_dig","metaserver/static/js/clean/viewer","metaserver/static/js/core/i18n"],(function(e,t,a,s,i,r,o,n,l,m,d){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.ChangedEmailVerifiedModal=t.EmailVerifiedModal=t.VerifyEmailSentModal=t.ResendVerifyEmailModal=t.VerifyEmailModal=void 0,s=a.__importDefault(s),i=a.__importDefault(i),n=a.__importStar(n);const u=[r.EmailVerificationReasons.ADD_COMMENT,r.EmailVerificationReasons.SUBSCRIBE_TO_COMMENTS,r.EmailVerificationReasons.SHARE_FILEVIEWER],c=({onClick:e})=>s.default.createElement("span",{className:"change-email-before-verify",onClick:e},d.intl.formatMessage({id:"62qYaH",defaultMessage:"Update email address"}));c.displayName="ChangeEmail";class f extends s.default.Component{constructor(){super(...arguments),this.displayName="VerifyEmailModal",this.sendEmail=e=>(e.preventDefault(),i.default.send_verification_email(this.props.user,this.props.email,this.props.reason,this.emailSent)),this.cancel=()=>{this.props.onCancel&&this.props.onCancel(),this.close()},this.close=()=>{n.unmountModal()},this.emailSent=()=>{var e;return this.close(),null===(e=this.props)||void 0===e?void 0:e.onEmailSent()},this.showChangeEmail=e=>{var t;const a={reason:this.props.reason};return o.UserActivityLogger.log("web","email_verify_change_first",a),e.preventDefault(),this.close(),null===(t=this.props)||void 0===t?void 0:t.onShowChange()},this.getPrompt=()=>{var e,t;switch(this.props.reason){case r.EmailVerificationReasons.ADD_COMMENT:return d.intl.formatMessage({id:"IqQ43j",defaultMessage:"Dropbox needs to verify your email address <strong>{email}</strong> before you can add comments. It’s as simple as clicking the link in the verification email we send to you."},{strong:e=>s.default.createElement("strong",null,e),email:this.props.email});case r.EmailVerificationReasons.SUBSCRIBE_TO_COMMENTS:return d.intl.formatMessage({id:"vL8W0q",defaultMessage:"Dropbox needs to verify your email address <strong>{email}</strong> before you can subscribe. It’s as simple as clicking the link in the verification email we send to you."},{strong:e=>s.default.createElement("strong",null,e),email:this.props.email});case r.EmailVerificationReasons.SHARE_FOLDER:return d.intl.formatMessage({id:"uhaAo6",defaultMessage:"Dropbox needs to verify your email address <strong>{email}</strong> to share folders. It’s as simple as clicking the link in the verification email we send to you."},{strong:e=>s.default.createElement("strong",null,e),email:this.props.email});case r.EmailVerificationReasons.NEW_DFB_TEAM_TRY:case r.EmailVerificationReasons.NEW_DFB_TEAM_BUY:return d.intl.formatMessage({id:"AeBfu4",defaultMessage:"Dropbox needs to verify your email address <strong>{email}</strong> to add members to your team. It’s as simple as clicking the link in the verification email we send to you."},{strong:e=>s.default.createElement("strong",null,e),email:this.props.email});case r.EmailVerificationReasons.SHMODAL:case r.EmailVerificationReasons.SHARE_FILEVIEWER:return d.intl.formatMessage({id:"snZuZp",defaultMessage:"Dropbox needs to verify your email address <strong>{email}</strong> to share links. It’s as simple as clicking the link in the verification email we send to you."},{strong:e=>s.default.createElement("strong",null,e),email:this.props.email});case r.EmailVerificationReasons.SEND_TRANSFER_VIA_EMAIL:return d.intl.formatMessage({id:"KJO3V/",defaultMessage:"Dropbox needs to verify your email address <strong>{email}</strong> to send transfers. It’s as simple as clicking the link in the verification email we send to you."},{strong:e=>s.default.createElement("strong",null,e),email:this.props.email});case r.EmailVerificationReasons.CREATE_API_APP:return d.intl.formatMessage({id:"zLfhKE",defaultMessage:"Dropbox needs to verify your email address <strong>{email}</strong> before you can register an API app. It’s as simple as clicking the link in the verification email we send to you."},{strong:e=>s.default.createElement("strong",null,e),email:this.props.email});case r.EmailVerificationReasons.PUBLIC_FOLDER:return d.intl.formatMessage({id:"yAlYzI",defaultMessage:"Dropbox needs to verify your email address <strong>{email}</strong> to enable your Public folder. It’s as simple as clicking the link in the verification email we send to you."},{strong:e=>s.default.createElement("strong",null,e),email:this.props.email});case r.EmailVerificationReasons.CHANGE_EMAIL:const{is_paired:a}=m.Viewer.get_viewer();return a&&"personal"===(null===(e=this.props.user)||void 0===e?void 0:e.role)?d.intl.formatMessage({id:"mdc1jT",defaultMessage:"Dropbox needs to verify your email address <strong>{email}</strong> to finish updating your personal email. It’s as simple as clicking the link in the verification email we send to you."},{strong:e=>s.default.createElement("strong",null,e),email:this.props.email}):a&&"work"===(null===(t=this.props.user)||void 0===t?void 0:t.role)?d.intl.formatMessage({id:"7PsqE/",defaultMessage:"Dropbox needs to verify your email address <strong>{email}</strong> to finish updating your {team} email. It’s as simple as clicking the link in the verification email we send to you."},{strong:e=>s.default.createElement("strong",null,e),email:this.props.email,team:m.Viewer.get_viewer().team_name}):d.intl.formatMessage({id:"2HVRJ2",defaultMessage:"Dropbox needs to verify your email address <strong>{email}</strong> to finish updating your email. It’s as simple as clicking the link in the verification email we send to you."},{strong:e=>s.default.createElement("strong",null,e),email:this.props.email});case r.EmailVerificationReasons.CREATE_FILE_COLLECTOR:return d.intl.formatMessage({id:"KyKro/",defaultMessage:"Dropbox needs to verify your email address <strong>{email}</strong> to create file requests. It’s as simple as clicking the link in the verification email we send to you."},{strong:e=>s.default.createElement("strong",null,e),email:this.props.email});case r.EmailVerificationReasons.GIFT_BUY:return d.intl.formatMessage({id:"ObebZe",defaultMessage:"Dropbox needs to verify your email address <strong>{email}</strong> before you can send gifts to your friends. It’s as simple as clicking the link in the verification email we send to you."},{strong:e=>s.default.createElement("strong",null,e),email:this.props.email});case r.EmailVerificationReasons.REFER_FRIENDS:return d.intl.formatMessage({id:"NgyUVU",defaultMessage:"Dropbox needs to verify your email address <strong>{email}</strong> before you can invite friends. It’s as simple as clicking the link in the verification email we send to you."},{strong:e=>s.default.createElement("strong",null,e),email:this.props.email});case r.EmailVerificationReasons.CREATE_TEAM:return d.intl.formatMessage({id:"7AVwhM",defaultMessage:"Dropbox needs to verify your email address <strong>{email}</strong> before you can create or join a team. It’s as simple as clicking the link in the verification email we send to you."},{strong:e=>s.default.createElement("strong",null,e),email:this.props.email});case r.EmailVerificationReasons.CLOUD_DOCS:return d.intl.formatMessage({id:"fmvo35",defaultMessage:"Dropbox needs to verify your email address <strong>{email}</strong> before you can open or create this document type. It’s as simple as clicking the link in the verification email we send to you."},{strong:e=>s.default.createElement("strong",null,e),email:this.props.email});case r.EmailVerificationReasons.MOUNT_FOLDER:return d.intl.formatMessage({id:"sBGn1X",defaultMessage:"Dropbox needs to verify your email address <strong>{email}</strong> to add folders to your Dropbox account. It’s as simple as clicking the link in the verification email we send to you."},{strong:e=>s.default.createElement("strong",null,e),email:this.props.email});case r.EmailVerificationReasons.SAVE_FOLDER:return d.intl.formatMessage({id:"3acALd",defaultMessage:"Dropbox needs to verify your email address <strong>{email}</strong> to save folders to your Dropbox account. It’s as simple as clicking the link in the verification email we send to you."},{strong:e=>s.default.createElement("strong",null,e),email:this.props.email});default:return d.intl.formatMessage({id:"MOMy71",defaultMessage:"Verify your email address at <strong>{email}</strong> to share folders and ensure your account can be recovered."},{strong:e=>s.default.createElement("strong",null,e),email:this.props.email})}}}_getStyle(){return u.includes(this.props.reason)?"default-maestro":"default"}render(){const e={reason:this.props.reason};return o.UserActivityLogger.log("web","email_verify_shown",e),s.default.createElement(l.Modal,{title:d.intl.formatMessage({id:"qSfYsl",defaultMessage:"Verify your email address"}),className:"verify-email",acceptButtonText:d.intl.formatMessage({id:"ldGo0I",defaultMessage:"Send email"}),dismissButtonText:d.intl.formatMessage({id:"rH6g3h",defaultMessage:"Cancel"}),onAccept:this.sendEmail,onDismiss:this.cancel,ref:"modal",style:this._getStyle(),altAction:s.default.createElement(c,{onClick:this.showChangeEmail})},s.default.createElement("div",{className:"db-modal-message"},s.default.createElement("div",null,this.getPrompt())))}}t.VerifyEmailModal=f,f.displayName="VerifyEmailModal";class h extends s.default.Component{constructor(){super(...arguments),this.displayName="ResendVerifyEmailModal",this._getStyle=()=>this._isMaestroDesign()?"default-maestro":"default",this._isMaestroDesign=()=>u.includes(this.props.reason),this.cancel=()=>{this.props.onCancel&&this.props.onCancel(),this.close()},this.close=()=>{n.unmountModal()},this.showChangeEmail=e=>{var t;const a={reason:this.props.reason};return o.UserActivityLogger.log("web","email_verify_resend_change_first",a),e.preventDefault(),this.close(),null===(t=this.props)||void 0===t?void 0:t.onShowChange()},this.sendEmail=e=>(e.preventDefault(),i.default.send_verification_email(this.props.user,this.props.email,this.props.reason,this.emailSent)),this.emailSent=()=>{var e;return this.close(),null===(e=this.props)||void 0===e?void 0:e.onEmailSent()},this.getPrompt=()=>{var e,t;const{is_paired:a}=m.Viewer.get_viewer();return this.props.reason===r.EmailVerificationReasons.REFER_FRIENDS?d.intl.formatMessage({id:"V5m/DU",defaultMessage:"Dropbox needs to verify your email address <strong>{email}</strong> before you can invite friends. Check your inbox and click the link in the email to verify your address. If you can’t find it, check your spam folder."},{strong:e=>s.default.createElement("strong",null,e),email:this.props.email}):this.props.reason!==r.EmailVerificationReasons.CHANGE_EMAIL?d.intl.formatMessage({id:"1B+7Tj",defaultMessage:"Dropbox has sent a verification email to <strong>{email}</strong>. Check your inbox and click on the link in the email to verify your address. If you can't find it, check your spam folder or click the button to resend the email."},{strong:e=>s.default.createElement("strong",null,e),email:this.props.email}):a&&"personal"===(null===(e=this.props.user)||void 0===e?void 0:e.role)?d.intl.formatMessage({id:"0BEy+K",defaultMessage:"Dropbox has sent a verification email to <strong>{email}</strong>. Check your inbox and click on the link in the email to finish updating your personal email. If you can't find it, check your spam folder or click the button to resend the email."},{strong:e=>s.default.createElement("strong",null,e),email:this.props.email}):a&&"work"===(null===(t=this.props.user)||void 0===t?void 0:t.role)?d.intl.formatMessage({id:"XICSrF",defaultMessage:"Dropbox has sent a verification email to <strong>{email}</strong>. Check your inbox and click on the link in the email to finish updating your {team} email. If you can't find it, check your spam folder or click the button to resend the email."},{strong:e=>s.default.createElement("strong",null,e),email:this.props.email,team:m.Viewer.get_viewer().team_name}):d.intl.formatMessage({id:"MbQzS4",defaultMessage:"Dropbox has sent a verification email to <strong>{email}</strong>. Check your inbox and click on the link in the email to finish updating your email. If you can't find it, check your spam folder or click the button to resend the email."},{strong:e=>s.default.createElement("strong",null,e),email:this.props.email})}}render(){const e={reason:this.props.reason};return o.UserActivityLogger.log("web","email_verify_resend_shown",e),s.default.createElement(l.Modal,{title:d.intl.formatMessage({id:"LX3/hN",defaultMessage:"Verify your email address"}),ref:"modal",style:this._getStyle(),altAction:s.default.createElement(c,{onClick:this.showChangeEmail}),acceptButtonText:d.intl.formatMessage({id:"Xm2xLZ",defaultMessage:"Resend email"}),onAccept:this.sendEmail,dismissButtonText:d.intl.formatMessage({id:"HFcTbV",defaultMessage:"Done"}),onDismiss:this.cancel},s.default.createElement("div",{className:"db-modal-message"},s.default.createElement("div",null,this.getPrompt())))}}t.ResendVerifyEmailModal=h,h.displayName="ResendVerifyEmailModal";class g extends s.default.Component{render(){const e=d.intl.formatMessage({id:"+0qvoG",defaultMessage:"Dropbox has sent a verification email to <strong>{email}</strong>. Check your inbox and click on the link in the email to verify your address. If you can't find it, check your spam folder or click the button to resend the email."},{strong:e=>s.default.createElement("strong",null,e),email:this.props.email});return s.default.createElement(l.Modal,{title:d.intl.formatMessage({id:"lL1Onf",defaultMessage:"Verification email sent!"}),acceptButtonText:d.intl.formatMessage({id:"W0X0fi",defaultMessage:"Done"})},s.default.createElement("div",null,e))}}t.VerifyEmailSentModal=g,g.displayName="VerifyEmailSentModal";class p extends s.default.Component{constructor(){super(...arguments),this.getPrompt=()=>{switch(this.props.reason){case r.EmailVerificationReasons.CREATE_TEAM:return d.intl.formatMessage({id:"CYHyF8",defaultMessage:"Thanks for verifying your email address: <strong>{email}</strong>. Now you can invite members to your team."},{strong:e=>s.default.createElement("strong",null,e),email:this.props.email});case r.EmailVerificationReasons.SHARE_FOLDER:case r.EmailVerificationReasons.SEND_TRANSFER_VIA_EMAIL:return d.intl.formatMessage({id:"6wP/4a",defaultMessage:"Thanks for verifying your email address: <strong>{email}</strong>. You can now share and receive files on Dropbox."},{strong:e=>s.default.createElement("strong",null,e),email:this.props.email});case r.EmailVerificationReasons.CREATE_API_APP:return d.intl.formatMessage({id:"YYHOPg",defaultMessage:"Thanks for verifying your email address: <strong>{email}</strong>. You can now register API apps."},{strong:e=>s.default.createElement("strong",null,e),email:this.props.email});case r.EmailVerificationReasons.PUBLIC_FOLDER:return d.intl.formatMessage({id:"qn8l3S",defaultMessage:"Thanks for verifying your email address. You can now enable the Public folder for your <strong>{email}</strong> Dropbox."},{strong:e=>s.default.createElement("strong",null,e),email:this.props.email});default:return d.intl.formatMessage({id:"CMD+RZ",defaultMessage:"Thanks for verifying your email address: <strong>{email}</strong>."},{strong:e=>s.default.createElement("strong",null,e),email:this.props.email})}}}render(){return s.default.createElement(l.Modal,{title:d.intl.formatMessage({id:"hzY9FQ",defaultMessage:"Your email address is now verified"}),acceptButtonText:d.intl.formatMessage({id:"iJbj1c",defaultMessage:"Done"})},s.default.createElement("div",null,this.getPrompt()))}}t.EmailVerifiedModal=p,p.displayName="EmailVerifiedModal";class _ extends s.default.Component{constructor(){super(...arguments),this.getPrompt=()=>{var e,t;const{is_paired:a}=m.Viewer.get_viewer();return a&&"personal"===(null===(e=this.props.user)||void 0===e?void 0:e.role)?d.intl.formatMessage({id:"NWO11b",defaultMessage:"Thanks for verifying your email address <strong>{email}</strong>. Your personal account has successfully been changed."},{strong:e=>s.default.createElement("strong",null,e),email:this.props.email}):a&&"work"===(null===(t=this.props.user)||void 0===t?void 0:t.role)?d.intl.formatMessage({id:"TJea5z",defaultMessage:"Thanks for verifying your email address <strong>{email}</strong>. Your {team} account has successfully been changed."},{strong:e=>s.default.createElement("strong",null,e),email:this.props.email,team:m.Viewer.get_viewer().team_name}):d.intl.formatMessage({id:"X16ZP1",defaultMessage:"Thanks for verifying your email address <strong>{email}</strong>. Your account has successfully been changed."},{strong:e=>s.default.createElement("strong",null,e),email:this.props.email})}}render(){return s.default.createElement(l.Modal,{title:d.intl.formatMessage({id:"36KbGT",defaultMessage:"Your email address is now verified"}),acceptButtonText:d.intl.formatMessage({id:"0+WBOf",defaultMessage:"Done"})},s.default.createElement("div",null,this.getPrompt()))}}t.ChangedEmailVerifiedModal=_,_.displayName="ChangedEmailVerifiedModal"}));
//# sourceMappingURL=pkg-account.min.js-vfl16OM-W.map