define("metaserver/static/js/clean/referrer_cleansing_redirect",["require","exports","tslib","sjcl","metaserver/static/js/core/browser","js/browser/cookies","metaserver/static/js/core/uri"],(function(e,r,t,c,s,i,n){"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.safe_open_tab_and_redirect=r.redirect=r.get_redirect_uri=void 0,c=t.__importStar(c),s=t.__importStar(s);const o=function(e){const r=c.codec.utf8String.toBits(i.Cookies.read("__Host-js_csrf")),t=new c.misc.hmac(r).encrypt(e);return c.codec.base64.fromBits(t)};function a(e){const r=n.URI.parse(e).getScheme();if(r&&!["http","https"].includes(r))return"#";const t=new n.URI({scheme:"https",authority:"www.dropbox.com",path:"/referrer_cleansing_redirect"});return t.setQuery({url:e,hmac:o(e)}),t}function _(e,r=window,t=!1){t&&(r.opener=null),s.redirect(a(e),r)}r.get_redirect_uri=a,r.redirect=_,r.safe_open_tab_and_redirect=function(e){_(e,s.unsafe_open_tab(""),!0)}}));
//# sourceMappingURL=pkg-referrer-cleansing-redirect.min.js-vflq0qLqf.map